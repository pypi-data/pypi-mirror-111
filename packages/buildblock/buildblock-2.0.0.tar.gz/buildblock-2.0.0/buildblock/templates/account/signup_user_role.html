{% extends "account/base.html" %}
{% load static i18n account_tag %}


{% block content %}
<div class="col-lg-5">
    <div class="card">
        <div class="card-header pt-4 pb-4 text-center bg-primary">
            <a href="{% url 'home' %}">
                <span><img src="{% static 'landing/images/logo/logo_w_h36.png' %}" alt="" height="24" id="side-main-logo"></span>
            </a>
        </div>
        <div class="card-body p-4">
            {% if application_role %}
            <div class="text-center w-75 m-auto">
                <h4 class="text-dark-50 text-center mt-0 font-weight-bold">{% trans "Signup as" %} {% get_user_role_title application_role %}</h4>
            </div>
            <form class="account_form" id="signup_form" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {% for hidden_field in form.hidden_fields %}
                {{ hidden_field }}
                {% endfor %}

                {% if form.non_field_errors %}
                <div class="alert alert-danger" role="alert">
                    {% for error in form.non_field_errors %}
                    {{ error }}
                    {% endfor %}
                </div>
                {% endif %}

                {% for field in form.visible_fields %}
                  {% if 'agree_terms' not in field.name %}
                  <div class="form-group">
                      {% include "account/signup_form.html" with field=field %}
                  </div>
                  {% endif %}
                {% endfor %}

                <div class="form-group mb-0 text-center">
                    <button class="btn btn-primary" type="submit"> {% trans "Sign up" %} </button>
                </div>
            </form>
            {% else %}
            <div class="text-center w-75 m-auto">
                <h4 class="text-dark-50 text-center mt-0 font-weight-bold">{% trans "Sign up Service" %}</h4>
                <p class="text-muted mb-4">Select role</p>
            </div>

            <div class="form-group mb-0 text-center">
                {% for role in service_role_set %}
                {% if role not in user.user_role %}
                <a href="{% url service_app_name|add:':signup-role' application_role=role %}">
                    <button class="btn btn-primary"> {% get_user_role_title role=role %} </button>
                </a>
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}

{% block more_action %}
{% if request.session.active_role %}
<div class="col-10 text-center">
    <p class="text-muted"><a href="{% url service_app_name|add:':profile' %}" class="text-muted ml-1"><b>{% trans "User profile" %}</b></a></p>
</div>
{% elif application_role %}
<div class="col-10 text-center">
    <p class="text-muted"><a href="{% url service_app_name|add:':signup-choice' %}" class="text-muted ml-1"><b>{% trans "Change user role" %}</b></a></p>
</div>
{% endif %}
{% endblock more_action %}
