{% extends "account/base.html" %}

{% load static i18n account socialaccount %}
{% load widget_tweaks crispy_forms_tags %}

{% block title %}{% trans "BuildBlock | Sign In" %}{% endblock %}

{% block content %}

<div class="col-lg-5">
    <div class="card">
        <div class="card-header pt-4 pb-4 text-center bg-primary">
            <a href="{% url 'home' %}">
                <span><img src="{% static 'landing/images/logo/logo_w_h36.png' %}" alt="" height="24" id="side-main-logo"></span>
            </a>
        </div>
        <div class="card-body p-4">
          <div class="text-center w-75 m-auto">
              <h4 class="text-dark-50 text-center mt-0 font-weight-bold">Sign In</h4>
              <p class="text-muted mb-4">{% trans "Enter your email address and password to access the admin panel." %}</p>
          </div>

          <form class="account_form" method="POST" action="{% url 'account_login' %}">
              {% csrf_token %}
              {% for hidden_field in form.hidden_fields %}
              {{ hidden_field }}
              {% endfor %}

              {% if form.non_field_errors %}
              <div class="alert alert-danger" role="alert">
                {% for error in form.non_field_errors %}
                {{ error }}
                {% endfor %}
              </div>
              {% endif %}

              <div class="form-group">
                  {% include "account/signup_form.html" with field=form.login %}
              </div>

              <div class="form-group">
                  <a href="{% url 'account_reset_password' %}" class="text-muted float-right"><small>{% trans "Forgot your password?" %}</small></a>
                  {% include "account/signup_form.html" with field=form.password %}
              </div>

              <div class="form-group mb-3">
                  <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="checkbox-signin" name="remember" checked>
                      <label class="custom-control-label" for="checkbox-signin">{% trans "Remember me" %}</label>
                  </div>
              </div>

              <div class="form-group mb-0 text-center">
                  <button class="btn btn-primary" type="submit"> {% trans "Sign in" %} </button>
              </div>

              {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
              {% endif %}
            </form>
        </div>
    </div>
</div>

{% endblock content %}

{% block more_action %}
<div class="col-10 text-center">
    <p class="text-muted">{% trans "Don't have an account?" %} <a href="{{ signup_url }}" class="text-muted ml-1"><b>{% trans "Sign up" %}</b></a></p>
</div>
{% endblock more_action %}
