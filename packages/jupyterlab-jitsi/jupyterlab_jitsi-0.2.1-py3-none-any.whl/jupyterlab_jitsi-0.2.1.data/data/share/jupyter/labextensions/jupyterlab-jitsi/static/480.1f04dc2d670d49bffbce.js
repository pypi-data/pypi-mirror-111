(self.webpackChunkjupyterlab_jitsi=self.webpackChunkjupyterlab_jitsi||[]).push([[480],{480:(o,e,t)=>{"use strict";t.r(e),t.d(e,{camIcon:()=>r,default:()=>h});var s=t(138),n=t(950),i=t(904),l=t(357),a=t(886),c=t(290);const r=new n.LabIcon({name:"jupyterlab-jitsi:icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 0 24 24" width="48px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path class="jp-icon3 jp-icon-selectable" fill="#616161" d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM15 16H5V8h10v8zm-6-1h2v-2h2v-2h-2V9H9v2H7v2h2z"/></svg>'});class p extends s.IFrame{constructor(o,e){super();const t=[];for(const e in o)if("options"===e){const s=o.options,n=JSON.stringify(s);t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}else t.push(encodeURIComponent(e)+"="+encodeURIComponent(o[e]));this.query=t.join("&");const s=a.PageConfig.getBaseUrl();let n;this.url=s+`jitsi/app/index.html?${this.query}`,console.log("Full URL: ",this.url),n="roomAlias"in o.options?o.options.roomAlias:`Room #${e+1} ${o.options.roomName}`,this.id="Jitsi",this.title.label=n,this.title.icon=r,this.title.closable=!0,this.node.style.overflowY="auto",this.node.style.background="#FFF",this.sandbox=["allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation","allow-top-navigation-by-user-activation"]}dispose(){super.dispose()}onCloseRequest(){this.dispose()}}const h={id:"jupyterlab-jitsi:plugin",autoStart:!0,requires:[s.ICommandPalette,i.ISettingRegistry],optional:[l.ILauncher],activate:(o,e,t,s)=>{let n,i=[];const l=()=>{const t=n.get("configured_rooms").composite;console.log(t);let l=0;for(const o of i)o.dispose();i=[],t.forEach(((t,n)=>{const a=`jitsi:open:${l}`,c=t.options,h=new p(t,n);let d;d="roomAlias"in c?c.roomAlias:`Room #${n+1} ${c.roomName}`;const m=o.commands.addCommand(a,{label:d,execute:()=>{h.isAttached||o.shell.add(h,"main"),o.shell.activateById(h.id)},icon:r});if(i.push(m),s){const o=s.add({command:a,rank:1+n,category:"Robotics"});i.push(o)}const u=e.addItem({command:a,category:"Robotics"});i.push(u),l+=1}))};t.load("jupyterlab-jitsi:plugin").then((o=>{console.log(o),n=o;const e=o.get("configured_endpoints").composite;console.log(e),l(),o.changed.connect(l)})),async function(o="",e={}){const t=c.ServerConnection.makeSettings(),s=a.URLExt.join(t.baseUrl,"jitsi",o);let n;try{n=await c.ServerConnection.makeRequest(s,e,t)}catch(o){throw new c.ServerConnection.NetworkError(o)}let i=await n.text();if(i.length>0)try{i=JSON.parse(i)}catch(o){console.log("Not a JSON response body.",n)}if(!n.ok)throw new c.ServerConnection.ResponseError(n,i.message||i);return i}("get_example").then((o=>{console.log(o)})).catch((o=>{console.error(`The jupyterlab-jitsi server extension appears to be missing.\n${o}`)}))}}}}]);