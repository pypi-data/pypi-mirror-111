(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_header_tsx-app_views_performance_transactionSummary_-24ecdb"],{"./app/utils/isActiveSuperuser.tsx":(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var n=r("../node_modules/js-cookie/src/js.cookie.js"),o=r.n(n),s=r("./app/stores/configStore.tsx");function a(){return!(!(s.Z.get("user")||{}).isSuperuser||(o().set("su","test"),void 0!==o().get("su")))}},"./app/utils/performance/segmentExplorer/segmentExplorerQuery.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>u}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/react/index.js"),r("./app/utils/discover/genericDiscoverQuery.tsx")),s=r("./app/utils/withApi.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t){return e.aggregateColumn!==t.aggregateColumn||e.sort!==t.sort||e.allTagKeys!==t.allTagKeys||e.tagKey!==t.tagKey}function l(e){return(0,a.tZ)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({route:"events-facets-performance",getRequestPayload:(t=e,r=t.aggregateColumn,function(e){var n=e.eventView.getEventsAPIPayload(e.location);return n.aggregateColumn=r,n.sort=t.sort?t.sort:n.sort,t.allTagKeys&&(n.allTagKeys=t.allTagKeys),t.tagKey&&(n.tagKey=t.tagKey),n}),shouldRefetchData:c},e));var t,r}l.displayName="SegmentExplorerQuery";const u=(0,s.Z)(l)},"./app/views/performance/breadcrumb.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/react/index.js"),u=r("./app/components/breadcrumbs.tsx"),d=r("./app/locale.tsx"),p=r("./app/utils/queryString.tsx"),m=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),f=r("./app/views/performance/transactionSummary/utils.tsx"),y=r("./app/views/performance/vitalDetail/utils.tsx"),g=r("./app/views/performance/utils.tsx"),v=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e){(0,a.Z)(l,e);var t,r,n=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,o.Z)(this,l),n.apply(this,arguments)}return(0,s.Z)(l,[{key:"getCrumbs",value:function(){var e=[],t=this.props,r=t.organization,n=t.location,o=t.transactionName,s=t.vitalName,a=t.eventSlug,i=t.traceSlug,c=t.transactionComparison,l=t.realUserMonitoring,u={pathname:(0,g.de)(r),query:h(h({},n.query),{},{transaction:void 0})};if(e.push({to:u,label:(0,d.t)("Performance"),preserveGlobalSelection:!0}),s){var v=(0,y.i4)({orgSlug:r.slug,vitalName:"fcp",projectID:(0,p.ro)(n.query.project),query:n.query});e.push({to:v,label:(0,d.t)("Vital Detail"),preserveGlobalSelection:!0})}else if(o)if(l){var j=(0,m.Pl)({orgSlug:r.slug,transaction:o,projectID:(0,p.ro)(n.query.project),query:n.query});e.push({to:j,label:(0,d.t)("Web Vitals"),preserveGlobalSelection:!0})}else{var b=(0,f.e1)({orgSlug:r.slug,transaction:o,projectID:(0,p.ro)(n.query.project),query:n.query});e.push({to:b,label:(0,d.t)("Transaction Summary"),preserveGlobalSelection:!0})}return o&&a?e.push({to:"",label:(0,d.t)("Event Details")}):c?e.push({to:"",label:(0,d.t)("Compare to Baseline")}):i&&e.push({to:"",label:(0,d.t)("Trace View")}),e}},{key:"render",value:function(){return(0,v.tZ)(u.Z,{crumbs:this.getCrumbs()})}}]),l}(l.Component);b.displayName="Breadcrumb";const Z=b},"./app/views/performance/transactionSummary/header.tsx":(e,t,r)=>{"use strict";r.d(t,{O:()=>Q,Z:()=>J}),r("../node_modules/core-js/modules/es.reflect.construct.js");var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js")),p=r("./app/components/acl/feature.tsx"),m=r("./app/components/button.tsx"),f=r("./app/components/buttonBar.tsx"),y=r("./app/components/createAlertButton.tsx"),g=r("./app/components/layouts/thirds.tsx"),v=r("./app/components/links/listLink.tsx"),j=r("./app/components/navTabs.tsx"),h=r("./app/icons/index.tsx"),b=r("./app/locale.tsx"),Z=r("./app/utils/analytics.tsx"),_=r("./app/utils/queryString.tsx"),w=r("./app/views/performance/breadcrumb.tsx"),x=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),k=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),S=(r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("./app/actionCreators/performance.tsx")),O=r("./app/utils/withApi.tsx"),T=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var C=function(e){(0,a.Z)(d,e);var t,r,u=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function d(){var e;(0,n.Z)(this,d);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,s.Z)(e),"state",{isLoading:!0,keyFetchID:void 0,error:null,isKeyTransaction:!1}),(0,l.Z)((0,s.Z)(e),"fetchData",(function(){var t=e.props,r=t.organization,n=t.eventView,o=t.transactionName,s=n.project;if(1===s.length){var a="/organizations/".concat(r.slug,"/is-key-transactions/"),i=Symbol("keyFetchID");e.setState({isLoading:!0,keyFetchID:i}),e.props.api.requestPromise(a,{method:"GET",includeAllArgs:!0,query:{project:s.map((function(e){return String(e)})),transaction:o}}).then((function(t){var r=(0,k.Z)(t,3),n=r[0];r[1],r[2],e.state.keyFetchID===i&&e.setState({isLoading:!1,keyFetchID:void 0,error:null,isKeyTransaction:!(null==n||!n.isKey)})})).catch((function(t){var r,n;e.setState({isLoading:!1,keyFetchID:void 0,error:null!==(r=null===(n=t.responseJSON)||void 0===n?void 0:n.detail)&&void 0!==r?r:null,isKeyTransaction:!1})}))}})),(0,l.Z)((0,s.Z)(e),"toggleKeyTransactionHandler",(function(){var t=e.props,r=t.eventView,n=t.api,o=t.organization,s=t.transactionName,a=e.state.isKeyTransaction,i=r.project.map(String);(0,Z.ec)({eventName:"Performance Views: Key Transaction toggle",eventKey:"performance_views.key_transaction.toggle",organization_id:o.id,action:a?"remove":"add"}),(0,S.Fe)(n,a,o.slug,i,s).then((function(){e.setState({isKeyTransaction:!a})}))})),e}return(0,o.Z)(d,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=e.organization.slug!==this.props.organization.slug,r=1===e.eventView.project.length&&1===this.props.eventView.project.length&&e.eventView.project[0]!==this.props.eventView.project[0];(t||r)&&this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.isKeyTransaction,r=e.isLoading;return 1!==this.props.eventView.project.length||r?null:(0,T.tZ)(m.ZP,{icon:t?(0,T.tZ)(h.GK,{color:"yellow300",isSolid:!0}):(0,T.tZ)(h.GK,{}),onClick:this.toggleKeyTransactionHandler,children:(0,b.t)("Key Transaction")})}}]),d}(d.Component);C.displayName="KeyTransactionButton";const P=(0,O.Z)(C);r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var q=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),D=(r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("./app/components/performance/teamKeyTransaction.tsx")),z=r("./app/components/performance/teamKeyTransactionsManager.tsx"),V=r("./app/components/tooltip.tsx"),N=r("./app/utils.tsx"),K=r("./app/utils/isActiveSuperuser.tsx"),A=r("./app/utils/withProjects.tsx"),R=r("./app/utils/withTeams.tsx"),B=["isOpen","keyedTeams"],E=["counts","getKeyedTeams","project","transactionName"],I=["eventView","organization","teams","projects"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=function(e){(0,a.Z)(l,e);var t,r,s=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,n.Z)(this,l),s.apply(this,arguments)}return(0,o.Z)(l,[{key:"render",value:function(){var e,t=this.props,r=t.isOpen,n=t.keyedTeams,o=(0,q.Z)(t,B),s=null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0,a=(0,T.tZ)(m.ZP,L(L({},o),{},{icon:s?(0,T.tZ)(h.GK,{color:"yellow300",isSolid:!0}):(0,T.tZ)(h.GK,{}),children:s?(0,b.tn)("Starred for Team","Starred for Teams",s):(0,b.t)("Star for Team")}));if(!r&&null!=n&&n.length){var i=n.map((function(e){return e.slug})).join(", ");return(0,T.tZ)(V.Z,{title:i,children:a})}return a}}]),l}(d.Component);function H(e){var t=e.counts,r=e.getKeyedTeams,n=e.project,o=e.transactionName,s=(0,q.Z)(e,E),a=r(n.id,o);return(0,T.tZ)(D.Z,L({counts:t,keyedTeams:a,title:M,project:n,transactionName:o},s))}function X(e){var t=e.eventView,r=e.organization,n=e.teams,o=e.projects,s=(0,q.Z)(e,I);if(1!==t.project.length)return(0,T.tZ)(M,{isOpen:!1,disabled:!0,keyedTeams:null});var a=String(t.project[0]),i=o.find((function(e){return e.id===a}));if(!(0,N.ri)(i))return(0,T.tZ)(M,{isOpen:!1,disabled:!0,keyedTeams:null});var c=(0,K.M)(),l=n.filter((function(e){return e.isMember||c}));return(0,T.tZ)(z.z,{organization:r,teams:l,selectedTeams:["myteams"],selectedProjects:[String(a)],children:(0,T.tZ)(z.$,{children:function(e){return(0,T.tZ)(H,L(L({organization:r,project:i},s),e))}})})}M.displayName="TitleButton",H.displayName="TeamKeyTransactionButton",X.displayName="TeamKeyTransactionButtonWrapper";const G=(0,R.Z)((0,A.Z)(X));var Q,W=r("./app/views/performance/transactionSummary/utils.tsx");!function(e){e[e.TransactionSummary=0]="TransactionSummary",e[e.RealUserMonitoring=1]="RealUserMonitoring",e[e.Tags=2]="Tags",e[e.Events=3]="Events"}(Q||(Q={}));var U=function(e){(0,a.Z)(j,e);var t,r,u=(t=j,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function j(){var e;(0,n.Z)(this,j);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,s.Z)(e),"trackVitalsTabClick",(function(){var t=e.props.organization;(0,Z.ec)({eventKey:"performance_views.vitals.vitals_tab_clicked",eventName:"Performance Views: Vitals tab clicked",organization_id:t.id})})),(0,l.Z)((0,s.Z)(e),"trackTagsTabClick",(function(){})),(0,l.Z)((0,s.Z)(e),"trackEventsTabClick",(function(){var t=e.props.organization;(0,Z.ec)({eventKey:"performance_views.events.events_tab_clicked",eventName:"Performance Views: Events tab clicked",organization_id:t.id})})),(0,l.Z)((0,s.Z)(e),"handleIncompatibleQuery",(function(t,r){var n,o;e.trackAlertClick(r),null===(n=(o=e.props).handleIncompatibleQuery)||void 0===n||n.call(o,t,r)})),(0,l.Z)((0,s.Z)(e),"handleCreateAlertSuccess",(function(){e.trackAlertClick()})),e}return(0,o.Z)(j,[{key:"trackAlertClick",value:function(e){var t=this.props.organization;(0,Z.ec)({eventKey:"performance_views.summary.create_alert_clicked",eventName:"Performance Views: Create alert clicked",organization_id:t.id,status:e?"error":"success",errors:e,url:window.location.href})}},{key:"renderCreateAlertButton",value:function(){var e=this.props,t=e.eventView,r=e.organization,n=e.projects;return(0,T.tZ)(y.K,{eventView:t,organization:r,projects:n,onIncompatibleQuery:this.handleIncompatibleQuery,onSuccess:this.handleCreateAlertSuccess,referrer:"performance"})}},{key:"renderKeyTransactionButton",value:function(){var e=this.props,t=e.eventView,r=e.organization,n=e.transactionName;return(0,T.tZ)(p.Z,{organization:r,features:["team-key-transactions"],children:function(e){return e.hasFeature?(0,T.tZ)(G,{transactionName:n,eventView:t,organization:r}):(0,T.tZ)(P,{transactionName:n,eventView:t,organization:r})}})}},{key:"render",value:function(){var e,t,r,n,o,s=this,a=this.props,i=a.organization,c=a.location,l=a.transactionName,u=a.currentTab,y=a.hasWebVitals,j=(0,W.e1)({orgSlug:i.slug,transaction:l,projectID:(0,_.ro)(c.query.project),query:c.query}),Z=(0,x.Pl)({orgSlug:i.slug,transaction:l,projectID:(0,_.ro)(c.query.project),query:c.query}),k=(t=(e={orgSlug:i.slug,transaction:l,projectID:(0,_.ro)(c.query.project),query:c.query}).transaction,r=e.projectID,n=e.query,{pathname:(o={orgSlug:e.orgSlug},"/organizations/".concat(o.orgSlug,"/performance/summary/tags/")),query:{transaction:t,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}),S=function(e){var t=e.transaction,r=e.projectID,n=e.query;return{pathname:"/organizations/".concat(e.orgSlug,"/performance/summary/events/"),query:{transaction:t,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}({orgSlug:i.slug,transaction:l,projectID:(0,_.ro)(c.query.project),query:c.query});return(0,T.BX)(g.h4,{children:[(0,T.BX)(g.oB,{children:[(0,T.tZ)(w.Z,{organization:i,location:c,transactionName:l,realUserMonitoring:u===Q.RealUserMonitoring}),(0,T.tZ)(g.Dx,{children:l})]}),(0,T.tZ)(g.kP,{children:(0,T.BX)(f.ZP,{gap:1,children:[(0,T.tZ)(p.Z,{organization:i,features:["incidents"],children:function(e){return e.hasFeature&&s.renderCreateAlertButton()}}),this.renderKeyTransactionButton(),(0,T.tZ)(m.ZP,{href:"/settings/".concat(i.slug,"/performance/"),icon:(0,T.tZ)(h.iC,{}),"aria-label":"Settings"})]})}),(0,T.tZ)(d.Fragment,{children:(0,T.BX)($,{children:[(0,T.tZ)(v.Z,{to:j,isActive:function(){return u===Q.TransactionSummary},children:(0,b.t)("Overview")}),y&&(0,T.tZ)(v.Z,{to:Z,isActive:function(){return u===Q.RealUserMonitoring},onClick:this.trackVitalsTabClick,children:(0,b.t)("Web Vitals")}),(0,T.tZ)(p.Z,{features:["organizations:performance-tag-page"],children:(0,T.tZ)(v.Z,{to:k,isActive:function(){return u===Q.Tags},onClick:this.trackTagsTabClick,children:(0,b.t)("Tags")})}),(0,T.tZ)(p.Z,{features:["organizations:performance-events-page"],children:(0,T.tZ)(v.Z,{to:S,isActive:function(){return u===Q.Events},onClick:this.trackEventsTabClick,children:(0,b.t)("All Events")})})]})})]})}}]),j}(d.Component);U.displayName="TransactionHeader";var $=(0,u.Z)(j.Z,{target:"ega7at50"})({name:"13jhhqe",styles:"margin-bottom:0;width:100%"});const J=U},"./app/views/performance/transactionSummary/tagExplorer.tsx":(e,t,r)=>{"use strict";r.d(t,{e2:()=>R,xS:()=>B,D_:()=>H}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js"),r("../node_modules/core-js/modules/es.reflect.construct.js");var n,o=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.number.constructor.js"),r("../node_modules/core-js/modules/es.parse-int.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/react/index.js")),f=r("../node_modules/react-router/es/index.js"),y=r("./app/components/assistant/guideAnchor.tsx"),g=r("./app/components/featureBadge.tsx"),v=r("./app/components/gridEditable/index.tsx"),j=r("./app/components/gridEditable/sortLink.tsx"),h=r("./app/components/links/link.tsx"),b=r("./app/components/pagination/index.tsx"),Z=r("./app/locale.tsx"),_=r("./app/styles/space.tsx"),w=r("./app/utils/analytics.tsx"),x=r("./app/utils/discover/eventView.tsx"),k=r("./app/utils/formatters.tsx"),S=r("./app/utils/performance/segmentExplorer/segmentExplorerQuery.tsx"),O=r("./app/utils/queryString.tsx"),T=r("./app/utils/tokenizeSearch.tsx"),C=r("./app/views/eventsV2/table/cellAction.tsx"),P=r("./app/views/performance/utils.tsx"),q=r("./app/views/performance/transactionSummary/filter.tsx"),D=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N="tags_cursor",K=[{key:"key",field:"key",name:"Tag Key",width:-1,column:{kind:"field"}},{key:"tagValue",field:"tagValue",name:"Tag Values",width:-1,column:{kind:"field"}},{key:"aggregate",field:"aggregate",name:"Avg Duration",width:-1,column:{kind:"field"},canSort:!0},{key:"frequency",field:"frequency",name:"Frequency",width:-1,column:{kind:"field"},canSort:!0},{key:"comparison",field:"comparison",name:"Compared To Avg",width:-1,column:{kind:"field"},canSort:!0},{key:"sumdelta",field:"sumdelta",name:"Total Time Lost",width:-1,column:{kind:"field"},canSort:!0}],A=(n={},(0,d.Z)(n,q.f1.Browser,"spans.browser"),(0,d.Z)(n,q.f1.Http,"spans.http"),(0,d.Z)(n,q.f1.Db,"spans.db"),(0,d.Z)(n,q.f1.Resource,"spans.resource"),n),R=function(e,t,r){return A[e]||((0,P.C$)(t,r)===P.iy.FRONTEND?"measurements.lcp":"transaction.duration")};function B(e){return(0,D.tZ)("div",{className:"truncate",children:e.row.tags_value})}B.displayName="TagValue";var E=function(e){(0,c.Z)(p,e);var t,r,n=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var o=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function p(){var e;(0,s.Z)(this,p);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,d.Z)((0,i.Z)(e),"state",{widths:[]}),(0,d.Z)((0,i.Z)(e),"handleResizeColumn",(function(t,r){var n=(0,o.Z)(e.state.widths);n[t]=r.width?Number(r.width):v.z7,e.setState({widths:n})})),(0,d.Z)((0,i.Z)(e),"getColumnOrder",(function(t){var r=e.state.widths;return t.map((function(e,t){return"number"==typeof r[t]?V(V({},e),{},{width:r[t]}):e}))})),(0,d.Z)((0,i.Z)(e),"renderHeadCellWithMeta",(function(t,r,n){return function(o,s){return e.renderHeadCell(t,r,o,n[s])}})),(0,d.Z)((0,i.Z)(e),"handleTagValueClick",(function(t,r,n){var o=e.props.organization;(0,w.ec)({eventKey:"performance_views.summary.tag_explorer.tag_value",eventName:"Performance Views: Tag Explorer Value Clicked",organization_id:parseInt(o.id,10)});var s=(0,O.ro)(t.query.query),a=(0,T.aI)(s||"");a.addTagValues(r,[n]);var i=a.formatString();f.browserHistory.push({pathname:t.pathname,query:V(V({},t.query),{},{query:String(i).trim()})})})),(0,d.Z)((0,i.Z)(e),"handleCellAction",(function(t,r,n){return function(o){var s,a=e.props,i=a.eventView,c=a.location,l=a.organization;(0,w.ec)({eventKey:"performance_views.summary.tag_explorer.cell_action",eventName:"Performance Views: Tag Explorer Cell Action Clicked",organization_id:parseInt(l.id,10)});var u=(0,T.aI)(i.query);u.removeTag("event.type"),(0,C.rh)(u,o,V(V({},t),{},{name:n.id}),r),f.browserHistory.push({pathname:c.pathname,query:V(V({},c.query),{},(s={},(0,d.Z)(s,N,void 0),(0,d.Z)(s,"query",u.formatString()),s))})}})),(0,d.Z)((0,i.Z)(e),"renderBodyCell",(function(t,r,n){var o=n[r.key],s=t.location;if("key"===r.key)return n.tags_key;var a=[C.eX.ADD,C.eX.EXCLUDE];if("tagValue"===r.key){var i=V(V({},n),{},{id:n.tags_key});return(0,D.tZ)(C.ZP,{column:r,dataRow:i,handleCellAction:e.handleCellAction(r,n.tags_value,i),allowActions:a,children:(0,D.tZ)(h.Z,{to:"",onClick:function(){return e.handleTagValueClick(s,n.tags_key,n.tags_value)},children:(0,D.tZ)(B,{row:n})})})}if("frequency"===r.key)return(0,k.rl)(n.frequency,0);if("comparison"===r.key){var c=n.comparison,l=(0,k.rl)(c-1,0);return c>1?(0,Z.t)("+%s slower",l):(0,Z.t)("%s faster",l)}return"aggregate"===r.key?(0,D.tZ)(P.Xr,{abbreviation:!0,milliseconds:n.aggregate}):"sumdelta"===r.key?(0,D.tZ)(P.Xr,{abbreviation:!0,milliseconds:n.sumdelta}):o})),(0,d.Z)((0,i.Z)(e),"renderBodyCellWithData",(function(t){return function(r,n){return e.renderBodyCell(t,r,n)}})),e}return(0,a.Z)(p,[{key:"onSortClick",value:function(e,t){var r=this.props.organization;(0,w.ec)({eventKey:"performance_views.summary.tag_explorer.sort",eventName:"Performance Views: Tag Explorer Sorted",organization_id:parseInt(r.id,10),field:t,direction:e})}},{key:"renderHeadCell",value:function(e,t,r,n){var o=this,s=this.props.location,a={field:r.key,width:r.width},i=e.sortForField(a,t),c=(0,x.M3)(a,t),l=i?i.kind:void 0,u=i?i.field:void 0;return(0,D.tZ)(j.Z,{align:"left",title:n.name,direction:l,canSort:c,generateSortLink:function(){var r;if(t){var n=e.sortOnField(a,t).generateQueryStringObject().sort;return V(V({},s),{},{query:V(V({},s.query),{},(r={},(0,d.Z)(r,N,void 0),(0,d.Z)(r,"tagSort",n),r))})}},onClick:function(){return o.onSortClick(l,u)}})}},{key:"render",value:function(){var e,t,r=this,n=this.props,o=n.eventView,s=n.organization,a=n.location,i=n.currentFilter,c=n.projects,l=(0,O.ro)(null===(e=a.query)||void 0===e?void 0:e.tagSort),u=(0,O.ro)(null===(t=a.query)||void 0===t?void 0:t.tags_cursor),d=o.clone();d.fields=K;var p=(0,x.vp)(l),f=d.withSorts(p.length?p:[{field:"sumdelta",kind:"desc"}]),g=R(i,c,f),j=function(e,t,r){var n=K.map((function(e){return V({},e)})),o=n.find((function(e){return"aggregate"===e.key}));return o?A[e]?(o.name="Avg Span Duration",n):(0,P.C$)(t,r)===P.iy.FRONTEND?(o.name="Avg LCP",n):n:n}(i,c,f),h=this.getColumnOrder(j),b=f.getSorts();return(0,D.tZ)(S.Z,{eventView:f,orgSlug:s.slug,location:a,aggregateColumn:g,limit:5,cursor:u,children:function(e){var t=e.isLoading,n=e.tableData,o=e.pageLinks;return(0,D.BX)(m.Fragment,{children:[(0,D.tZ)(y.n,{target:"tag_explorer",children:(0,D.tZ)(I,{organization:s,pageLinks:o})}),(0,D.tZ)(v.ZP,{isLoading:t,data:n&&n.data?n.data:[],columnOrder:h,columnSortBy:b,grid:{renderHeadCell:r.renderHeadCellWithMeta(f,(null==n?void 0:n.meta)||{},j),renderBodyCell:r.renderBodyCellWithData(r.props),onResizeColumn:r.handleResizeColumn},location:a})]})}})}}]),p}(m.Component);function I(e){var t=e.pageLinks,r=e.organization;return(0,D.BX)(L,{children:[(0,D.tZ)(F,{children:(0,D.BX)("div",{children:[(0,Z.t)("Suspect Tags"),(0,D.tZ)(g.Z,{type:"beta",noTooltip:!0})]})}),(0,D.tZ)(M,{pageLinks:t,onCursor:function(e,t,n){(0,w.ec)({eventKey:"performance_views.summary.tag_explorer.change_page",eventName:"Performance Views: Tag Explorer Change Page",organization_id:parseInt(r.id,10)}),f.browserHistory.push({pathname:t,query:V(V({},n),{},(0,d.Z)({},N,e))})},size:"small"})]})}E.displayName="_TagExplorer",I.displayName="TagsHeader";var F=(0,p.Z)("h4",{target:"euaybo32"})("display:inline-grid;grid-auto-flow:column;grid-gap:",(0,_.Z)(1),";align-items:center;color:",(function(e){return e.theme.subText}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:",(0,_.Z)(1)," 0;line-height:1.3;"),L=(0,p.Z)("div",{target:"euaybo31"})("display:grid;grid-template-columns:1fr auto auto;margin-bottom:",(0,_.Z)(1),";"),M=(0,p.Z)(b.Z,{target:"euaybo30"})("margin:0 0 0 ",(0,_.Z)(1),";"),H=E},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{Pl:()=>o,oZ:()=>s,eH:()=>a,L0:()=>i,jb:()=>c});var n=r("./app/utils/performance/histogram/utils.tsx");function o(e){var t,r=e.orgSlug,n=e.transaction,o=e.projectID,s=e.query;return{pathname:(t={orgSlug:r},"/organizations/".concat(t.orgSlug,"/performance/summary/vitals/")),query:{transaction:n,project:o,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function s(e,t){var r=(0,n.te)(e);return!e.length||t>=e[e.length-1].bin+r?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/r)}function a(e){if(e.length<2)return null;for(var t=0;t<e.length;t++)for(var r=e[t],n=t+1;n<e.length;n++){var o=e[n];if(r.bin!==o.bin&&r.count!==o.count)return{point1:{x:t,y:Math.min(r.count,o.count)},point2:{x:n,y:Math.max(r.count,o.count)}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function i(e,t){var r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1]))return null;var n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1])?null:{point1:{x:r[0],y:r[1]},point2:{x:n[0],y:n[1]}}}function c(e,t,r){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||r.point1.x===r.point2.x||r.point1.y===r.point2.y)return null;var n=(e.x-t.point1.x)/(t.point2.x-t.point1.x),o=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:r.point1.x+(r.point2.x-r.point1.x)*n,y:r.point1.y+(r.point2.y-r.point1.y)*o}}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_header_tsx-app_views_performance_transactionSummary_-24ecdb.b297eab1c155eaa95b95d8e0f5560196.js.map