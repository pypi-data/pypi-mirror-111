(self.webpackChunk=self.webpackChunk||[]).push([["app_components_gridEditable_sortLink_tsx-app_views_eventsV2_table_cellAction_tsx"],{"./app/components/gridEditable/sortLink.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>_}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),l=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),c=r("../node_modules/react/index.js"),u=r("../node_modules/lodash/omit.js"),m=r.n(u),p=r("./app/components/links/link.tsx"),f=r("./app/icons/index.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var j=function(e){(0,l.Z)(d,e);var t,r,n=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,a.Z)(t);if(r){var o=(0,a.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function d(){return(0,o.Z)(this,d),n.apply(this,arguments)}return(0,s.Z)(d,[{key:"renderArrow",value:function(){var e=this.props.direction;return e?"desc"===e?(0,h.tZ)(v,{size:"xs",direction:"down"}):(0,h.tZ)(v,{size:"xs",direction:"up"}):null}},{key:"render",value:function(){var e=this.props,t=e.align,r=e.title,n=e.canSort,o=e.generateSortLink,s=e.onClick,l=o();return l&&n?(0,h.BX)(g,{align:t,to:l,onClick:s,children:[r," ",this.renderArrow()]}):(0,h.tZ)(y,{align:t,children:r})}}]),d}(c.Component);j.displayName="SortLink";var g=(0,d.Z)((function(e){var t=m()(e,["align"]);return(0,h.tZ)(p.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t))}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";"),y=(0,d.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";"),v=(0,d.Z)(f.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"});const _=j},"./app/views/eventsV2/table/cellAction.tsx":(e,t,r)=>{"use strict";r.d(t,{eX:()=>n,rh:()=>A,ZP:()=>C}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n,o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),l=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),m=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.is-array.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/react/index.js")),f=r("../node_modules/react-dom/index.js"),h=r("../node_modules/react-popper/lib/esm/Popper.js"),b=r("../node_modules/react-popper/lib/esm/Manager.js"),j=r("../node_modules/react-popper/lib/esm/Reference.js"),g=r("../node_modules/color/index.js"),y=r.n(g),v=r("./app/icons/index.tsx"),_=r("./app/locale.tsx"),w=r("./app/styles/space.tsx"),Z=r("./app/utils/discover/fields.tsx"),O=r("./app/utils/formatters.tsx"),k=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r,o){var s=r.name;switch("duration"===r.type&&"number"==typeof o&&(o=(0,O.g9)(o/1e3,2,!0)),Array.isArray(o)&&1===(o=(0,u.Z)(new Set(o))).length&&(o=o[0]),t){case n.ADD:if(null==o)e.removeTagValue("has",s),e.addTagValues("!has",[s]);else{if(e.removeTag("!".concat(s)),Array.isArray(o)){var l=e.getTagValues(s);o=(0,u.Z)(new Set([].concat((0,u.Z)(l),(0,u.Z)(o))))}else o=[String(o)];e.setTagValues(s,o)}break;case n.EXCLUDE:if(null==o)e.removeTagValue("!has",s),e.addTagValues("has",[s]);else{e.removeTag(s);var i="!".concat(s);o=Array.isArray(o)?o:[String(o)];var a=e.getTagValues(i);o=(0,u.Z)(new Set([].concat((0,u.Z)(a),(0,u.Z)(o)))),e.setTagValues(i,o)}break;case n.SHOW_GREATER_THAN:e.setTagValues(s,[">".concat(o)]);break;case n.SHOW_LESS_THAN:e.setTagValues(s,["<".concat(o)]);break;case n.TRANSACTION:case n.RELEASE:case n.DRILLDOWN:break;default:throw new Error("Unknown action type. ".concat(t))}}!function(e){e.ADD="add",e.EXCLUDE="exclude",e.SHOW_GREATER_THAN="show_greater_than",e.SHOW_LESS_THAN="show_less_than",e.TRANSACTION="transaction",e.RELEASE="release",e.DRILLDOWN="drilldown"}(n||(n={}));var S=function(e){(0,i.Z)(m,e);var t,r,u=(t=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var o=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function m(e){var t;(0,o.Z)(this,m),t=u.call(this,e),(0,c.Z)((0,l.Z)(t),"state",{isHovering:!1,isOpen:!1}),(0,c.Z)((0,l.Z)(t),"portalEl",void 0),(0,c.Z)((0,l.Z)(t),"menuEl",void 0),(0,c.Z)((0,l.Z)(t),"handleClickOutside",(function(e){t.menuEl&&e.target instanceof Element&&(t.menuEl.contains(e.target)||t.setState({isOpen:!1,isHovering:!1}))})),(0,c.Z)((0,l.Z)(t),"handleMouseEnter",(function(){t.setState({isHovering:!0})})),(0,c.Z)((0,l.Z)(t),"handleMouseLeave",(function(){t.setState((function(e){return e.isOpen?e:E(E({},e),{},{isHovering:!1})}))})),(0,c.Z)((0,l.Z)(t),"handleMenuToggle",(function(e){e.preventDefault(),t.setState({isOpen:!t.state.isOpen})}));var r=document.getElementById("cell-action-portal");return r||((r=document.createElement("div")).setAttribute("id","cell-action-portal"),document.body.appendChild(r)),t.portalEl=r,t.menuEl=null,t}return(0,s.Z)(m,[{key:"componentDidUpdate",value:function(e,t){this.state.isOpen&&!1===t.isOpen&&document.addEventListener("click",this.handleClickOutside,!0),!1===this.state.isOpen&&t.isOpen&&document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"renderMenuButtons",value:function(){var e=this.props,t=e.dataRow,r=e.column,o=e.handleCellAction,s=e.allowActions;if((0,Z.sU)(r.name))return null;if((0,Z.uI)(r.name))return null;var l=t[(0,Z.LY)(r.name)];Array.isArray(l)&&null===l[0]&&"field"===r.column.kind&&"error.handled"===r.column.field&&(l=1);var i=[];function a(e,t){(Array.isArray(s)&&s.includes(e)||!s)&&i.push(t)}return(!["duration","number","percentage"].includes(r.type)||null===l&&"field"===r.column.kind)&&(a(n.ADD,(0,k.tZ)(H,{"data-test-id":"add-to-filter",onClick:function(){return o(n.ADD,l)},children:(0,_.t)("Add to filter")},"add-to-filter")),"date"!==r.type&&a(n.EXCLUDE,(0,k.tZ)(H,{"data-test-id":"exclude-from-filter",onClick:function(){return o(n.EXCLUDE,l)},children:(0,_.t)("Exclude from filter")},"exclude-from-filter"))),["date","duration","integer","number","percentage"].includes(r.type)&&null!==l&&(a(n.SHOW_GREATER_THAN,(0,k.tZ)(H,{"data-test-id":"show-values-greater-than",onClick:function(){return o(n.SHOW_GREATER_THAN,l)},children:(0,_.t)("Show values greater than")},"show-values-greater-than")),a(n.SHOW_LESS_THAN,(0,k.tZ)(H,{"data-test-id":"show-values-less-than",onClick:function(){return o(n.SHOW_LESS_THAN,l)},children:(0,_.t)("Show values less than")},"show-values-less-than"))),"field"===r.column.kind&&"transaction"===r.column.field&&a(n.TRANSACTION,(0,k.tZ)(H,{"data-test-id":"transaction-summary",onClick:function(){return o(n.TRANSACTION,l)},children:(0,_.t)("Go to summary")},"transaction-summary")),"field"===r.column.kind&&"release"===r.column.field&&l&&a(n.RELEASE,(0,k.tZ)(H,{"data-test-id":"release",onClick:function(){return o(n.RELEASE,l)},children:(0,_.t)("Go to release")},"release")),"function"===r.column.kind&&"count_unique"===r.column.function[0]&&a(n.DRILLDOWN,(0,k.tZ)(H,{"data-test-id":"per-cell-drilldown",onClick:function(){return o(n.DRILLDOWN,l)},children:(0,_.t)("View Stacks")},"drilldown")),0===i.length?null:(0,k.tZ)(D,{onClick:function(e){e.stopPropagation()},children:i})}},{key:"renderMenu",value:function(){var e=this,t=this.state.isOpen,r=this.renderMenuButtons();if(null===r)return null;var n=null;return t&&(n=f.createPortal((0,k.tZ)(h.ZP,{placement:"top",modifiers:{hide:{enabled:!1},preventOverflow:{padding:10,enabled:!0,boundariesElement:"viewport"}},children:function(t){var n=t.ref,o=t.style,s=t.placement,l=t.arrowProps;return(0,k.BX)(L,{ref:function(t){n(t),e.menuEl=t},style:o,children:[(0,k.tZ)(P,{ref:l.ref,"data-placement":s,style:l.style}),r]})}}),this.portalEl)),(0,k.tZ)(T,{children:(0,k.BX)(b.ZP,{children:[(0,k.tZ)(j.Z,{children:function(t){var r=t.ref;return(0,k.tZ)(N,{ref:r,onClick:e.handleMenuToggle,children:(0,k.tZ)(v.YR,{size:"sm","data-test-id":"cell-action",color:"blue300"})})}}),n]})})}},{key:"render",value:function(){var e=this.props.children,t=this.state.isHovering;return(0,k.BX)(R,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[e,t&&this.renderMenu()]})}}]),m}(p.Component);S.displayName="CellAction";const C=S;var R=(0,m.Z)("div",{target:"e18g1e9m6"})({name:"zxsb69",styles:"position:relative;width:100%;height:100%"}),T=(0,m.Z)("div",{target:"e18g1e9m5"})({name:"1lby940",styles:"position:absolute;top:0;right:0"}),L=(0,m.Z)("div",{target:"e18g1e9m4"})("margin:",(0,w.Z)(1)," 0;z-index:",(function(e){return e.theme.zIndex.tooltip}),";"),D=(0,m.Z)("div",{target:"e18g1e9m3"})("background:",(function(e){return e.theme.background}),";border:1px solid ",(function(e){return e.theme.border}),";border-radius:",(function(e){return e.theme.borderRadius}),";box-shadow:",(function(e){return e.theme.dropShadowHeavy}),";overflow:hidden;"),P=(0,m.Z)("span",{target:"e18g1e9m2"})("position:absolute;width:18px;height:9px;&[data-placement*='bottom']{margin-top:-9px;&::before{border-width:0 9px 9px 9px;border-color:transparent transparent ",(function(e){return e.theme.border})," transparent;}&::after{top:1px;left:1px;border-width:0 8px 8px 8px;border-color:transparent transparent ",(function(e){return e.theme.background})," transparent;}}&[data-placement*='top']{margin-bottom:-8px;bottom:0;&::before{border-width:9px 9px 0 9px;border-color:",(function(e){return e.theme.border})," transparent transparent transparent;}&::after{bottom:1px;left:1px;border-width:8px 8px 0 8px;border-color:",(function(e){return e.theme.background})," transparent transparent transparent;}}&::before,&::after{width:0;height:0;content:'';display:block;position:absolute;border-style:solid;}"),H=(0,m.Z)("button",{target:"e18g1e9m1"})("display:block;width:100%;padding:",(0,w.Z)(1)," ",(0,w.Z)(2),";background:transparent;outline:none;border:0;border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";text-align:left;line-height:1.2;&:hover{background:",(function(e){return e.theme.backgroundSecondary}),";}&:last-child{border-bottom:0;}"),N=(0,m.Z)("button",{target:"e18g1e9m0"})("display:flex;width:24px;height:24px;padding:0;justify-content:center;align-items:center;background:",(function(e){return y()(e.theme.background).alpha(.85).string()}),";border-radius:",(function(e){return e.theme.borderRadius}),";border:1px solid ",(function(e){return e.theme.border}),";cursor:pointer;outline:none;")}}]);
//# sourceMappingURL=../sourcemaps/app_components_gridEditable_sortLink_tsx-app_views_eventsV2_table_cellAction_tsx.f7caf56865a263f7fe5734f177e3d49a.js.map