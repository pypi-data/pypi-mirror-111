(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_views_eventsV2_table_queryField_tsx"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>V}),n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es.array.for-each.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("../node_modules/core-js/modules/es.object.define-properties.js"),n("../node_modules/core-js/modules/es.object.define-property.js");var r,o=n("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),s=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=(n("../node_modules/core-js/modules/es.regexp.constructor.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.regexp.to-string.js"),n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.object.to-string.js"),n("../node_modules/core-js/modules/es.promise.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.object.assign.js"),n("../node_modules/react/index.js")),m=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),f=n("../node_modules/lodash/assign.js"),h=n.n(f),j=n("../node_modules/lodash/flatten.js"),v=n.n(j),b=n("../node_modules/lodash/isEqual.js"),g=n.n(b),y=n("../node_modules/lodash/memoize.js"),Z=n.n(y),w=n("../node_modules/lodash/omit.js"),O=n.n(w),k=n("./app/actionCreators/tags.tsx"),_=n("./app/components/smartSearchBar/index.tsx"),x=n("./app/constants/index.tsx"),C=n("./app/types/index.tsx"),S=n("./app/utils.tsx"),P=n("./app/utils/discover/fields.tsx"),T=n("./app/utils/measurements/measurements.tsx"),E=n("./app/utils/withApi.tsx"),D=n("./app/utils/withTags.tsx"),F=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=new RegExp("^".concat(x.c$,"|\\").concat(x.ir),"g"),N=function(e){(0,u.Z)(f,e);var t,n,p=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var o=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function f(){var e;(0,s.Z)(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=p.call.apply(p,[this].concat(n)),(0,c.Z)((0,i.Z)(e),"getEventFieldValues",Z()((function(t,n,r){var o=e.props,s=o.api,a=o.organization,i=o.projectIds,u=null==i?void 0:i.map(String);return(0,P.h1)(t.key)||(0,P.Xr)(t.key)?Promise.resolve([]):(0,k.Fo)(s,a.slug,t.key,n,u,r,!0).then((function(e){return v()(e.filter((function(e){var t=e.name;return(0,S.ri)(t)})).map((function(e){return e.name})))}),(function(){throw new Error("Unable to fetch event field values")}))}),(function(e,t){var n=e.key;return"".concat(n,"-").concat(t)}))),(0,c.Z)((0,i.Z)(e),"prepareQuery",(function(e){return e.replace(R,"")})),e}return(0,a.Z)(f,[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}},{key:"componentDidUpdate",value:function(e){var t,n;g()(this.props.projectIds,e.projectIds)||null===(t=(n=this.getEventFieldValues.cache).clear)||void 0===t||t.call(n)}},{key:"getTagList",value:function(e){var t=this.props,n=t.fields,r=t.organization,o=t.tags,s=t.omitTags,a=n?Object.fromEntries(n.filter((function(e){return!Object.keys(P.wZ).includes(e.field)&&!(0,P.GO)(e.field)})).map((function(e){return[e.field,{key:e.field,name:e.field}]}))):{},i=r.features.includes("performance-view")?Object.assign({},e,P.wZ,a):O()(P.wZ,P.J8),u=h()({},o,i);return u.has={key:"has",name:"Has property",values:Object.keys(u),predefined:!0},O()(u,null!=s?s:[])}},{key:"render",value:function(){var e=this;return(0,F.tZ)(T.Z,{children:function(t){var n=t.measurements,s=e.getTagList(n);return(0,F.tZ)(m.ms,{children:function(t){var n=t.css;return(0,F.tZ)(_.Z,A(A({},e.props),{},{hasRecentSearches:!0,savedSearchType:C.L4.EVENT,onGetTagValues:e.getEventFieldValues,supportedTags:s,prepareQuery:e.prepareQuery,excludeEnvironment:!0,dropdownClassName:n(r||(r=(0,o.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))}))}})}})}}]),f}(p.PureComponent);N.displayName="SearchBar";const V=(0,E.Z)((0,D.Z)(N))},"./app/utils/measurements/measurements.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=(n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.object.entries.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/react/index.js")),s=n("./app/utils/performance/vitals/constants.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),i=Object.fromEntries(Object.entries(s.r).map((function(e){var t=(0,r.Z)(e,2),n=t[0];return[n,{name:t[1].name,key:n}]})));function u(e){return(0,a.tZ)(o.Fragment,{children:e.children({measurements:i})})}u.displayName="Measurements";const l=u},"./app/utils/withTags.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>b}),n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es.array.for-each.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("../node_modules/core-js/modules/es.object.define-properties.js"),n("../node_modules/core-js/modules/es.object.define-property.js");var r=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/react/index.js")),p=n("./app/stores/tagStore.tsx"),m=n("./app/utils/getDisplayName.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),h=["tags"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const b=function(e){var t=function(t){(0,i.Z)(j,t);var n,c,m=(n=j,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(n);if(c){var r=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function j(){var e;(0,o.Z)(this,j);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=m.call.apply(m,[this].concat(n)),(0,d.Z)((0,a.Z)(e),"state",{tags:p.Z.getAllTags()}),(0,d.Z)((0,a.Z)(e),"unsubscribe",p.Z.listen((function(t){return e.setState({tags:t})}),void 0)),e}return(0,s.Z)(j,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var t=this.props,n=t.tags,o=(0,r.Z)(t,h);return(0,f.tZ)(e,v({},v({tags:null!=n?n:this.state.tags},o)))}}]),j}(c.Component);return t.displayName="WithTags",(0,d.Z)(t,"displayName","withTags(".concat((0,m.Z)(e),")")),t}},"./app/views/eventsV2/table/queryField.tsx":(e,t,n)=>{"use strict";n.d(t,{q:()=>J}),n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("../node_modules/core-js/modules/es.object.define-properties.js"),n("../node_modules/core-js/modules/es.object.define-property.js");var r=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/es.array.for-each.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.array.index-of.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.values.js"),n("../node_modules/core-js/modules/es.object.assign.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/react/index.js")),m=n("../node_modules/react-select/dist/chunk-80640036.browser.esm.js"),f=n("../node_modules/lodash/cloneDeep.js"),h=n.n(f),j=n("./app/components/forms/selectControl.tsx"),v=n("./app/components/tag.tsx"),b=n("./app/locale.tsx"),g=n("./app/styles/space.tsx"),y=n("./app/views/settings/components/forms/controls/input.tsx"),Z=(n("../node_modules/core-js/modules/es.object.to-string.js"),n("../node_modules/core-js/modules/es.array.from.js"),n("../node_modules/core-js/modules/es.string.iterator.js"),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/core-js/modules/es.symbol.iterator.js"),n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.array.is-array.js"),n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js")),w=(n("../node_modules/core-js/modules/es.array.reduce.js"),n("../node_modules/core-js/modules/es.string.match-all.js"),n("../node_modules/core-js/modules/es.string.search.js"),n("../node_modules/core-js/modules/es.array.slice.js"),n("../node_modules/core-js/modules/es.array.flat.js"),n("../node_modules/lodash/isEqual.js")),O=n.n(w),k=n("./app/styles/overflowEllipsis.tsx"),_=n("./app/utils/discover/fields.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),C=["onUpdate","options"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){(0,i.Z)(m,e);var t,n,c=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,u.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=c.call.apply(c,[this].concat(n)),(0,d.Z)((0,a.Z)(e),"state",{query:e.props.value,partialTerm:null,rawOptions:e.props.options,dropdownVisible:!1,dropdownOptionGroups:N(e.props.options,null),activeSelection:-1}),(0,d.Z)((0,a.Z)(e),"input",(0,p.createRef)()),(0,d.Z)((0,a.Z)(e),"blur",(function(){var t;null===(t=e.input.current)||void 0===t||t.blur()})),(0,d.Z)((0,a.Z)(e),"focus",(function(t){var n,r;null===(n=e.input.current)||void 0===n||n.focus(),null===(r=e.input.current)||void 0===r||r.setSelectionRange(t,t)})),(0,d.Z)((0,a.Z)(e),"handleChange",(function(t){var n=t.target.value.replace("\n","");e.setState({query:n},e.updateAutocompleteOptions)})),(0,d.Z)((0,a.Z)(e),"handleClick",(function(){e.updateAutocompleteOptions()})),(0,d.Z)((0,a.Z)(e),"handleFocus",(function(){e.setState({dropdownVisible:!0})})),(0,d.Z)((0,a.Z)(e),"handleBlur",(function(){e.props.onUpdate(e.state.query),e.setState({dropdownVisible:!1})})),(0,d.Z)((0,a.Z)(e),"handleKeyDown",(function(t){var n=t.key,r=e.state,o=r.activeSelection,s=r.dropdownOptionGroups,a=o>=0;if("ArrowDown"===n||"ArrowUp"===n){t.preventDefault();var i,u=s.map((function(e){return e.options.length})).reduce((function(e,t){return e+t}),0);return i=a?"ArrowUp"===n?(o-1+u)%u:(o+1)%u:"ArrowUp"===n?u-1:0,void e.setState({activeSelection:i,dropdownOptionGroups:e.makeActive(i)})}if(!a||"Tab"!==n&&"Enter"!==n)"Enter"!==n||e.blur();else{t.preventDefault();var l=e.getSelection(o);l&&e.handleSelect(l)}})),(0,d.Z)((0,a.Z)(e),"handleKeyUp",(function(t){"Escape"===t.key&&(t.preventDefault(),e.state.activeSelection>=0||e.blur())})),(0,d.Z)((0,a.Z)(e),"handleSelect",(function(t){var n=e.splitQuery(),r=n.prefix,o=n.suffix;e.setState({query:"".concat(r).concat(t.value," ").concat(o),activeSelection:-1},(function(){e.focus(r.length+t.value.length+1),e.updateAutocompleteOptions()}))})),e}return(0,s.Z)(m,[{key:"getCursorPosition",value:function(){var e,t;return null!==(e=null===(t=this.input.current)||void 0===t?void 0:t.selectionStart)&&void 0!==e?e:-1}},{key:"splitQuery",value:function(){var e=this.state.query,t=this.getCursorPosition(),n=(0,Z.Z)(e.substring(0,t).matchAll(/\s|^/g)),r=n[n.length-1],o=""===r[0]?0:(r.index||0)+1,s=e.slice(t).search(/\s|$/),a=t+(-1===s?0:s);return{startOfTerm:o,endOfTerm:a,prefix:e.substring(0,o),term:e.substring(o,a),suffix:e.substring(a)}}},{key:"makeActive",value:function(e){var t=N(this.props.options,this.state.partialTerm);return t.map((function(e){return e.options})).flat()[e].active=!0,t}},{key:"getSelection",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw s}}}}(this.state.dropdownOptionGroups);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!(e>=r.options.length))return r.options[e];e-=r.options.length}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"updateAutocompleteOptions",value:function(){var e=this.props.options,t=this.splitQuery().term||null;this.setState({dropdownOptionGroups:N(e,t),partialTerm:t})}},{key:"render",value:function(){var e=this.props,t=(e.onUpdate,e.options,(0,r.Z)(e,C)),n=this.state,o=n.dropdownVisible,s=n.dropdownOptionGroups;return(0,x.BX)(D,{isOpen:o,children:[(0,x.tZ)(F,P(P({},t),{},{ref:this.input,autoComplete:"off",className:"form-control",value:this.state.query,onClick:this.handleClick,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown})),(0,x.tZ)(L,{isOpen:o,optionGroups:s,handleSelect:this.handleSelect})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return O()(t.rawOptions,e.options)?P({},t):P(P({},t),{},{rawOptions:e.options,dropdownOptionGroups:N(e.options,t.partialTerm),activeSelection:-1})}}]),m}(p.PureComponent);E.displayName="ArithmeticInput",(0,d.Z)(E,"defaultProps",{options:[]});var D=(0,c.Z)("div",{target:"e18r1b6w8"})("border:1px solid ",(function(e){return e.theme.border}),";box-shadow:inset ",(function(e){return e.theme.dropShadowLight}),";background:",(function(e){return e.theme.background}),";position:relative;border-radius:",(function(e){return e.isOpen?"".concat(e.theme.borderRadius," ").concat(e.theme.borderRadius," 0 0"):e.theme.borderRadius}),";.show-sidebar &{background:",(function(e){return e.theme.backgroundSecondary}),";}"),F=(0,c.Z)(y.Z,{target:"e18r1b6w7"})({name:"pv1u47",styles:"height:40px;padding:7px 10px;border:0;box-shadow:none;&:hover,&:focus{border:0;box-shadow:none;}"});function L(e){var t=e.isOpen,n=e.optionGroups,r=e.handleSelect;return(0,x.tZ)(V,{isOpen:t,children:(0,x.tZ)(I,{children:n.map((function(e){var t=e.title,n=e.options;return(0,x.BX)(p.Fragment,{children:[(0,x.tZ)(B,{children:(0,x.tZ)(U,{children:t})}),n.map((function(e){return(0,x.tZ)(q,{className:e.active?"active":void 0,onClick:function(){return r(e)},onMouseDown:function(e){return e.preventDefault()},ref:function(t){var n;return e.active&&(null==t||null===(n=t.scrollIntoView)||void 0===n?void 0:n.call(t,{block:"nearest"}))},children:(0,x.tZ)(M,{children:e.value})},e.value)})),0===n.length&&(0,x.tZ)(z,{children:(0,b.t)("No items found")})]},t)}))})})}function A(e,t){return{title:"Fields",options:e.filter((function(e){return"equation"!==e.kind})).filter((function(e){var t=(0,_.T$)(e);return"number"===t||"integer"===t||"duration"===t})).map((function(e){return{kind:"field",active:!1,value:(0,_.sN)(e)}})).filter((function(e){var n=e.value;return!t||n.includes(t)}))}}function R(e){return{title:"Operators",options:["+","-","*","/"].filter((function(t){return!e||t.includes(e)})).map((function(e){return{kind:"operator",active:!1,value:e}}))}}function N(e,t){return[A(e,t),R(t)]}L.displayName="TermDropdown";var V=(0,c.Z)("div",{target:"e18r1b6w6"})("display:",(function(e){return e.isOpen?"block":"none"}),";position:absolute;top:100%;left:-1px;right:-1px;z-index:",(function(e){return e.theme.zIndex.dropdown}),";background:",(function(e){return e.theme.background}),";box-shadow:",(function(e){return e.theme.dropShadowLight}),";border:1px solid ",(function(e){return e.theme.border}),";border-radius:",(function(e){return e.theme.borderRadiusBottom}),";max-height:300px;overflow-y:auto;"),I=(0,c.Z)("ul",{target:"e18r1b6w5"})({name:"nfj5ll",styles:"padding-left:0;list-style:none;margin-bottom:0"}),B=(0,c.Z)("li",{target:"e18r1b6w4"})("&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),U=(0,c.Z)("header",{target:"e18r1b6w3"})("display:flex;align-items:center;background-color:",(function(e){return e.theme.backgroundSecondary}),";color:",(function(e){return e.theme.gray300}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0;padding:",(0,g.Z)(1)," ",(0,g.Z)(2),";&>svg{margin-right:",(0,g.Z)(1),";}"),q=(0,c.Z)(B,{target:"e18r1b6w2"})("scroll-margin:40px 0;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,g.Z)(1)," ",(0,g.Z)(2),";cursor:pointer;&:hover,&.active{background:",(function(e){return e.theme.focus}),";}"),M=(0,c.Z)("div",{target:"e18r1b6w1"})("color:",(function(e){return e.theme.textColor}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0;line-height:",(function(e){return e.theme.text.lineHeightHeading}),";",k.Z,";"),z=(0,c.Z)("div",{target:"e18r1b6w0"})("display:flex;padding:",(0,g.Z)(1)," ",(0,g.Z)(2),";font-size:",(function(e){return e.theme.fontSizeLarge}),";color:",(function(e){return e.theme.gray300}),";&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),G=n("./app/views/eventsV2/table/types.tsx"),Q=["label","data"],K=["data"],W=["onUpdate"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var J=function(e){(0,i.Z)(n,e);var t=H(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),(0,d.Z)((0,a.Z)(e),"handleFieldChange",(function(t){if(t){var n=t.value,r=e.props.fieldValue,o=h()(e.props.fieldValue);switch(n.kind){case G.L.TAG:case G.L.MEASUREMENT:case G.L.BREAKDOWN:case G.L.FIELD:o={kind:"field",field:n.meta.name};break;case G.L.FUNCTION:"field"===r.kind?o={kind:"function",function:[n.meta.name,"",void 0,void 0]}:"function"===r.kind&&(o={kind:"function",function:[n.meta.name,r.function[1],r.function[2],r.function[3]]});break;default:throw new Error("Invalid field type found in column picker")}n.kind===G.L.FUNCTION&&(n.meta.parameters.forEach((function(t,n){if("function"===o.kind)if("column"===t.kind){var r=e.getFieldOrTagOrMeasurementValue(o.function[n+1]);null===r?o.function[n+1]=t.defaultValue||"":r.kind!==G.L.FIELD&&r.kind!==G.L.TAG&&r.kind!==G.L.MEASUREMENT&&r.kind!==G.L.BREAKDOWN||!Y(t.columnTypes,r)?(o.function[n+1]=t.defaultValue||"",o.function[n+2]=void 0):o.function[n+1]=r.meta.name}else o.function[n+1]=t.defaultValue||""})),"function"===o.kind&&(0===n.meta.parameters.length?o.function=[o.function[0],"",void 0,void 0]:1===n.meta.parameters.length&&(o.function[2]=void 0))),e.triggerChange(o)}})),(0,d.Z)((0,a.Z)(e),"handleEquationChange",(function(t){var n=h()(e.props.fieldValue);n.kind===G.L.EQUATION&&(n.field=t),e.triggerChange(n)})),(0,d.Z)((0,a.Z)(e),"handleFieldParameterChange",(function(t){var n=t.value,r=h()(e.props.fieldValue);"function"===r.kind&&(r.function[1]=n.meta.name),e.triggerChange(r)})),(0,d.Z)((0,a.Z)(e),"handleDropdownParameterChange",(function(t){return function(n){var r=h()(e.props.fieldValue);"function"===r.kind&&(r.function[t]=n.value),e.triggerChange(r)}})),(0,d.Z)((0,a.Z)(e),"handleScalarParameterChange",(function(t){return function(n){var r=h()(e.props.fieldValue);"function"===r.kind&&(r.function[t]=n),e.triggerChange(r)}})),e}return(0,s.Z)(n,[{key:"triggerChange",value:function(e){this.props.onChange(e)}},{key:"getFieldOrTagOrMeasurementValue",value:function(e){var t=this.props.fieldOptions;if(void 0===e)return null;var n="field:".concat(e);if(t[n])return t[n].value;var r="measurement:".concat(e);if(t[r])return t[r].value;var o="span_op_breakdown:".concat(e);if(t[o])return t[o].value;var s=0===e.indexOf("tags[")?"tag:".concat(e.replace(/tags\[(.*?)\]/,"$1")):"tag:".concat(e);return t[s]?t[s].value:e.length>0?{kind:G.L.TAG,meta:{name:e,dataType:"string",unknown:!0}}:null}},{key:"getFieldData",value:function(){var e=this,t=null,n=this.props.fieldValue,r=this.props.fieldOptions;if("function"===n.kind){var o="function:".concat(n.function[0]);void 0!==r[o]&&(t=r[o].value)}"field"===n.kind&&(t=this.getFieldOrTagOrMeasurementValue(n.field),r=this.appendFieldIfUnknown(r,t));var s=[];return t&&t.kind===G.L.FUNCTION&&t.meta.parameters.length>0&&n.kind===G.L.FUNCTION&&(s=t.meta.parameters.map((function(t,o){if("column"===t.kind){var s=e.getFieldOrTagOrMeasurementValue(n.function[1]);return r=e.appendFieldIfUnknown(r,s),{kind:"column",value:s,required:t.required,options:Object.values(r).filter((function(e){var n=e.value;return(n.kind===G.L.FIELD||n.kind===G.L.TAG||n.kind===G.L.MEASUREMENT||n.kind===G.L.BREAKDOWN)&&Y(t.columnTypes,n)}))}}return"dropdown"===t.kind?{kind:"dropdown",options:t.options,dataType:t.dataType,required:t.required,value:"function"===n.kind&&n.function[o+1]||t.defaultValue||""}:{kind:"value",value:"function"===n.kind&&n.function[o+1]||t.defaultValue||"",dataType:t.dataType,required:t.required,placeholder:t.placeholder}}))),{field:t,fieldOptions:r,parameterDescriptions:s}}},{key:"appendFieldIfUnknown",value:function(e,t){return t?(t&&t.kind===G.L.TAG&&t.meta.unknown&&((e=Object.assign({},e))[t.meta.name]={label:t.meta.name,value:t}),e):e}},{key:"renderParameterInputs",value:function(e){var t=this,n=this.props,r=n.disabled,o=n.inFieldLabels,s=n.filterAggregateParameters,a=n.hideParameterSelector,i=e.map((function(e,n){if("column"===e.kind&&e.options.length>0){if(a)return null;var i=s?e.options.filter(s):e.options;return(0,x.tZ)(j.Z,{name:"parameter",placeholder:(0,b.t)("Select value"),options:i,value:e.value,required:e.required,onChange:t.handleFieldParameterChange,inFieldLabel:o?(0,b.t)("Parameter: "):void 0,disabled:r},"select")}if("value"===e.kind){var u={required:e.required,value:e.value,onUpdate:t.handleScalarParameterChange(n+1),placeholder:e.placeholder,disabled:r};switch(e.dataType){case"number":return(0,x.tZ)(te,$({name:"refinement",type:"text",inputMode:"numeric",pattern:"[0-9]*(\\.[0-9]*)?"},u),"parameter:number");case"integer":return(0,x.tZ)(te,$({name:"refinement",type:"text",inputMode:"numeric",pattern:"[0-9]*"},u),"parameter:integer");default:return(0,x.tZ)(te,$({name:"refinement",type:"text"},u),"parameter:text")}}if("dropdown"===e.kind)return(0,x.tZ)(j.Z,{name:"dropdown",placeholder:(0,b.t)("Select value"),options:e.options,value:e.value,required:e.required,onChange:t.handleDropdownParameterChange(n+1),inFieldLabel:o?(0,b.t)("Parameter: "):void 0,disabled:r});throw new Error("Unknown parameter type encountered for ".concat(t.props.fieldValue))})),u=this.props.gridColumns,l=(null!=u?u:i.length+1)-i.length-1;if(void 0!==u&&l>0)for(var d=0;d<l;d++)i.push((0,x.tZ)(re,{},d));return i}},{key:"renderTag",value:function(e){var t,n;if(!1===this.props.shouldRenderTag)return null;switch(e){case G.L.FUNCTION:t="f(x)",n="success";break;case G.L.MEASUREMENT:t="measure",n="info";break;case G.L.BREAKDOWN:t="breakdown",n="error";break;case G.L.TAG:t=e,n="warning";break;case G.L.FIELD:t=e,n="highlight";break;default:t=e}return(0,x.tZ)(v.Z,{type:n,children:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.takeFocus,s=t.filterPrimaryOptions,a=t.fieldValue,i=t.inFieldLabels,u=t.disabled,l=t.hidePrimarySelector,d=t.gridColumns,c=t.otherColumns,p=this.getFieldData(),f=p.field,h=p.fieldOptions,v=p.parameterDescriptions,g=s?Object.values(h).filter(s):Object.values(h),y={name:"field",options:Object.values(g),placeholder:(0,b.t)("(Required)"),value:f,onChange:this.handleFieldChange,inFieldLabel:i?(0,b.t)("Function: "):void 0,disabled:u};o&&null===f&&(y.autoFocus=!0);var Z={singleValue:function(e){return $($({},e),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"calc(100% - 10px)"})},option:function(e){return $($({},e),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"})}},w=this.renderParameterInputs(v);if(a.kind===G.L.EQUATION)return(0,x.tZ)(ee,{className:n,gridColumns:1,tripleLayout:!1,children:(0,x.tZ)(E,{name:"arithmetic",type:"text",required:!0,value:a.field,onUpdate:this.handleEquationChange,options:c},"parameter:text")});var O=w.length>2?2:d||w.length+1;return(0,x.BX)(ee,{className:n,gridColumns:O,tripleLayout:3===d&&w.length>2,children:[!l&&(0,x.tZ)(j.Z,$($({},y),{},{styles:i?void 0:Z,components:{Option:function(t){var n=t.label,o=t.data,s=(0,r.Z)(t,Q);return(0,x.BX)(m.y.Option,$($({label:n,data:o},s),{},{children:[(0,x.tZ)("span",{"data-test-id":"label",children:n}),e.renderTag(o.value.kind)]}))},SingleValue:function(t){var n=t.data,o=(0,r.Z)(t,K);return(0,x.BX)(m.y.SingleValue,$($({data:n},o),{},{children:[(0,x.tZ)("span",{"data-test-id":"label",children:n.label}),e.renderTag(n.value.kind)]}))}}})),w]})}}]),n}(p.Component);function Y(e,t){return"function"==typeof e?e({name:t.meta.name,dataType:t.meta.dataType}):e.includes(t.meta.dataType)}J.displayName="QueryField";var ee=(0,c.Z)("div",{target:"eve9joo2"})("display:grid;",(function(e){return e.tripleLayout?"grid-template-columns: 1fr 2fr;":"grid-template-columns: repeat(".concat(e.gridColumns,", 1fr);")})," grid-column-gap:",(0,g.Z)(1),";align-items:center;flex-grow:1;"),te=function(e){(0,i.Z)(n,e);var t=H(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,d.Z)((0,a.Z)(r),"state",{value:r.props.value}),(0,d.Z)((0,a.Z)(r),"input",void 0),(0,d.Z)((0,a.Z)(r),"handleBlur",(function(){r.isValid?r.props.onUpdate(r.state.value):r.setState({value:r.props.value})})),(0,d.Z)((0,a.Z)(r),"handleChange",(function(e){r.isValid&&r.setState({value:e.target.value})})),r.input=p.createRef(),r}return(0,s.Z)(n,[{key:"isValid",get:function(){return!this.input.current||this.input.current.validity.valid}},{key:"render",value:function(){var e=this.props,t=(e.onUpdate,(0,r.Z)(e,W));return(0,x.tZ)(ne,$($({},t),{},{ref:this.input,className:"form-control",value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur}))}}]),n}(p.Component);te.displayName="BufferedInput";var ne=(0,c.Z)(y.Z,{target:"eve9joo1"})({name:"9dgk9j",styles:"height:41px;min-width:50px"}),re=(0,c.Z)("div",{target:"eve9joo0"})("height:41px;min-width:50px;background:",(function(e){return e.theme.backgroundSecondary}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:flex;align-items:center;justify-content:center;&:after{font-size:",(function(e){return e.theme.fontSizeMedium}),";content:'",(0,b.t)("No parameter"),"';color:",(function(e){return e.theme.gray300}),";}")}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_views_eventsV2_table_queryField_tsx.851323fa53c1e71bc5ad64de3d5827dc.js.map