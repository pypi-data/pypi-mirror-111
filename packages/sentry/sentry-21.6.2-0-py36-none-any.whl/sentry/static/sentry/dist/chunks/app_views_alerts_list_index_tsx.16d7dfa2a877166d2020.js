(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_list_index_tsx"],{"./app/components/onboardingPanel.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(r("../node_modules/react/index.js"),r("./app/components/panels/index.tsx")),o=r("./app/styles/space.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){var t=e.className,r=e.image,s=e.children;return(0,a.tZ)(n.s_,{className:t,children:(0,a.BX)(l,{children:[(0,a.tZ)(d,{children:r}),(0,a.tZ)(u,{children:s})]})})}i.displayName="OnboardingPanel";var l=(0,s.Z)("div",{target:"e19tujos2"})("padding:",(0,o.Z)(3),";position:relative;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(function(e){return e.theme.breakpoints[1]}),"){min-height:350px;}"),u=(0,s.Z)("div",{target:"e19tujos1"})("z-index:1;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){flex:2;}"),d=(0,s.Z)(u,{target:"e19tujos0"})("position:relative;min-height:100px;max-width:300px;margin:",(0,o.Z)(2)," auto;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){flex:1;margin:",(0,o.Z)(3),";max-width:auto;}");const c=i},"./app/views/alerts/list/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>de}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var s=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),o=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),l=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),d=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),h=r("../node_modules/@babel/runtime/regenerator/index.js"),g=r.n(h),f=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.is-array.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.from.js"),r("../node_modules/react/index.js")),y=r("../node_modules/lodash/flatten.js"),j=r.n(y),b=r("./app/actionCreators/prompts.tsx"),Z=r("./app/components/acl/feature.tsx"),v=r("./app/components/alert.tsx"),x=r("./app/components/asyncComponent.tsx"),w=r("./app/components/button.tsx"),_=r("./app/components/createAlertButton.tsx"),k=r("./app/components/layouts/thirds.tsx"),z=r("./app/components/links/externalLink.tsx"),S=r("./app/components/loadingIndicator.tsx"),O=r("./app/components/organizations/globalSelectionHeader/index.tsx"),P=r("./app/components/pagination/index.tsx"),L=r("./app/components/panels/index.tsx"),A=r("./app/components/searchBar.tsx"),B=r("./app/components/sentryDocumentTitle.tsx"),C=r("./app/icons/index.tsx"),q=r("./app/locale.tsx"),R=r("./app/styles/space.tsx"),T=r("./app/utils/analytics.tsx"),D=r("./app/utils/projects.tsx"),I=r("./app/utils/withOrganization.tsx"),N=r("./app/utils/withTeams.tsx"),X=r("./app/views/settings/components/emptyMessage.tsx"),F=r("./app/views/alerts/rules/teamFilter.tsx"),V=r("./app/views/alerts/list/header.tsx"),E=r("./images/spot/alerts-empty-state.svg"),M=r("./app/components/buttonBar.tsx"),Q=r("./app/components/onboardingPanel.tsx"),W=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function G(e){var t=e.actions;return(0,W.BX)(Q.Z,{image:(0,W.tZ)(K,{src:E}),children:[(0,W.tZ)("h3",{children:(0,q.t)("More signal, less noise")}),(0,W.tZ)("p",{children:(0,q.t)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")}),(0,W.tZ)(U,{gap:1,children:t})]})}G.displayName="Onboarding";var K=(0,m.Z)("img",{target:"evp2sp81"})("@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width: ",(function(e){return e.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),U=(0,m.Z)(M.ZP,{target:"evp2sp80"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"});const H=G;var Y=r("./app/views/alerts/list/row.tsx"),J=["cursor","page"],$=["cursor","page"];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,c.Z)(e);if(t){var n=(0,c.Z)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,d.Z)(this,r)}}var se="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976",ne=function(e){(0,u.Z)(d,e);var t,r=re(d);function d(){var e;(0,a.Z)(this,d);for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return e=r.call.apply(r,[this].concat(s)),(0,p.Z)((0,l.Z)(e),"handleChangeSearch",(function(t){var r=e.props,s=r.router,n=r.location,a=n.query,i=(a.cursor,a.page,(0,o.Z)(a,J));s.push({pathname:n.pathname,query:te(te({},i),{},{title:t})})})),(0,p.Z)((0,l.Z)(e),"handleChangeFilter",(function(t,r){var s=e.props,a=s.router,i=s.location,l=i.query,u=(l.cursor,l.page,(0,o.Z)(l,$)),d=u.team;"teams"===t&&(d=r.size?(0,n.Z)(r):"");var c=u.status;"status"===t&&(c=r.size?(0,n.Z)(r):""),a.push({pathname:i.pathname,query:te(te({},u),{},{status:c,team:0===d.length?"":d})})})),e}return(0,i.Z)(d,[{key:"getEndpoints",value:function(){var e=this.props,t=e.params,r=e.location,s=e.organization,n=r.query,o=this.getQueryStatus(n.status);return 1===o.length&&(n.status=o),n.team=(0,F.L)(n.team),s.features.includes("alert-details-redesign")&&(n.expand=["original_alert_rule"]),[["incidentList","/organizations/".concat(null==t?void 0:t.orgId,"/incidents/"),{query:n}]]}},{key:"getQueryStatus",value:function(e){return Array.isArray(e)?e:""===e?[]:["open","closed"].includes(e)?[e]:[]}},{key:"onLoadAllEndpointsSuccess",value:(t=(0,s.Z)(g().mark((function e(){var t,r,s,n,o,a,i,l,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.state.incidentList)&&0===t.length){e.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),e.abrupt("return");case 4:return this.setState({loading:!0}),r=this.props,s=r.params,n=r.location,o=r.organization,e.next=8,this.api.requestPromise("/organizations/".concat(null==s?void 0:s.orgId,"/alert-rules/"),{method:"GET",query:n.query});case 8:if(a=e.sent,!(i=a.length>0)){e.next=13;break}return this.setState({hasAlertRule:i,firstVisitShown:!1,loading:!1}),e.abrupt("return");case 13:return e.next=15,(0,b.v)(this.api,{organizationId:o.id,feature:"alert_stream"});case 15:l=e.sent,(u=!(null!=l&&l.dismissedTime))&&(0,b.X)(this.api,{feature:"alert_stream",organizationId:o.id,status:"dismissed"}),this.setState({hasAlertRule:i,firstVisitShown:u,loading:!1});case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderFilterBar",value:function(){var e,t=this.props,r=t.teams,s=t.location,n=new Set((0,F.L)(s.query.team)),o=new Set(this.getQueryStatus(s.query.status));return(0,W.BX)(ie,{children:[(0,W.tZ)(F.Z,{showStatus:!0,teams:r,selectedStatus:o,selectedTeams:n,handleChangeFilter:this.handleChangeFilter}),(0,W.tZ)(le,{placeholder:(0,q.t)("Search by name"),query:null===(e=s.query)||void 0===e?void 0:e.name,onSearch:this.handleChangeSearch})]})}},{key:"tryRenderOnboarding",value:function(){var e=this.state.firstVisitShown,t=this.props.organization;if(!e)return null;var r=(0,W.BX)(f.Fragment,{children:[(0,W.tZ)(w.ZP,{size:"small",external:!0,href:se,children:(0,q.t)("View Features")}),(0,W.tZ)(_.Z,{organization:t,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"alert_stream",children:(0,q.t)("Create Alert Rule")})]});return(0,W.tZ)(H,{actions:r})}},{key:"tryRenderEmpty",value:function(){var e=this.state.incidentList;return!e||e.length>0?null:(0,W.tZ)(X.Z,{size:"medium",icon:(0,W.tZ)(C.DL,{isCircled:!0,size:"48"}),title:(0,q.t)("No incidents exist for the current query."),description:(0,q._N)("Learn more about [link:Metric Alerts]",{link:(0,W.tZ)(z.Z,{href:se})})})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var e,t,r=this.state,s=r.loading,n=r.incidentList,o=r.incidentListPageLinks,a=r.hasAlertRule,i=this.props,l=i.params.orgId,u=i.organization,d=new Set(j()(null==n?void 0:n.map((function(e){return e.projects})))),c=!(!n||0!==n.length||void 0!==a),p=s||c;return(0,W.BX)(f.Fragment,{children:[null!==(e=this.tryRenderOnboarding())&&void 0!==e?e:(0,W.tZ)(L.KB,{isLoading:s,headers:[(0,q.t)("Alert Rule"),(0,q.t)("Triggered"),(0,q.t)("Duration"),(0,q.t)("Project"),(0,q.t)("Alert ID"),(0,q.t)("Team")],children:p?(0,W.tZ)(S.Z,{}):null!==(t=this.tryRenderEmpty())&&void 0!==t?t:(0,W.tZ)(D.Z,{orgId:l,slugs:Array.from(d),children:function(e){var t=e.initiallyLoaded,r=e.projects;return n.map((function(e){return(0,W.tZ)(Y.Z,{projectsLoaded:t,projects:r,incident:e,orgId:l,organization:u},e.id)}))}})}),(0,W.tZ)(P.Z,{pageLinks:o})]})}},{key:"renderBody",value:function(){var e=this.props,t=e.params,r=e.organization,s=e.router,n=t.orgId;return(0,W.tZ)(B.Z,{title:(0,q.t)("Alerts"),orgSlug:n,children:(0,W.BX)(O.Z,{organization:r,showDateSelector:!1,children:[(0,W.tZ)(V.Z,{organization:r,router:s,activeTab:"stream"}),(0,W.tZ)(ue,{children:(0,W.BX)(k.or,{fullWidth:!0,children:[!this.tryRenderOnboarding()&&(0,W.BX)(f.Fragment,{children:[(0,W.tZ)(Z.Z,{features:["alert-details-redesign"],organization:r,children:(0,W.tZ)(ae,{icon:(0,W.tZ)(C.aU,{}),children:(0,q.t)("This page only shows metric alerts.")})}),this.renderFilterBar()]}),this.renderList()]})})]})})}}]),d}(x.Z),oe=function(e){(0,u.Z)(r,e);var t=re(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(e){var t,r;(null===(t=e.location.query)||void 0===t?void 0:t.status)!==(null===(r=this.props.location.query)||void 0===r?void 0:r.status)&&this.trackView()}},{key:"trackView",value:function(){var e=this.props.organization;(0,T.ec)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:e.id})}},{key:"renderNoAccess",value:function(){return(0,W.tZ)(k.uT,{children:(0,W.tZ)(k.or,{fullWidth:!0,children:(0,W.tZ)(v.Z,{type:"warning",children:(0,q.t)("You don't have access to this feature")})})})}},{key:"render",value:function(){var e=this.props.organization;return(0,W.tZ)(Z.Z,{features:["organizations:incidents"],organization:e,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess,children:(0,W.tZ)(ne,te({},this.props))})}}]),r}(f.Component);oe.displayName="IncidentsListContainer";var ae=(0,m.Z)(v.Z,{target:"e12ryirh3"})("margin-bottom:",(0,R.Z)(1.5),";"),ie=(0,m.Z)("div",{target:"e12ryirh2"})("display:flex;margin-bottom:",(0,R.Z)(1.5),";"),le=(0,m.Z)(A.Z,{target:"e12ryirh1"})("flex-grow:1;margin-left:",(0,R.Z)(1.5),";"),ue=(0,m.Z)(k.uT,{target:"e12ryirh0"})({name:"108qp7n",styles:"margin-bottom:-20px"});const de=(0,I.Z)((0,N.Z)(oe))},"./images/spot/alerts-empty-state.svg":(e,t,r)=>{"use strict";e.exports=r.p+"assets/alerts-empty-state.4d03bc7c2675b8facd23.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_list_index_tsx.be2e003f5a4ee94b7c39e2ca9b957e09.js.map