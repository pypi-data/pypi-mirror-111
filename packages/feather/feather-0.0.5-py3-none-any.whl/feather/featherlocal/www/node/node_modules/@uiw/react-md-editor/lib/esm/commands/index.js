import _classCallCheck from "@babel/runtime/helpers/classCallCheck";
import _createClass from "@babel/runtime/helpers/createClass";
import { bold } from './bold';
import { code, codeBlock } from './code';
import { italic } from './italic';
import { link } from './link';
import { unorderedListCommand, orderedListCommand, checkedListCommand } from './list';
import { quote } from './quote';
import { hr } from './hr';
import { title } from './title';
import { title1 } from './title1';
import { title2 } from './title2';
import { title3 } from './title3';
import { title4 } from './title4';
import { title5 } from './title5';
import { title6 } from './title6';
import { comment } from './comment';
import { group } from './group';
import { divider } from './divider';
import { codePreview, codeEdit, codeLive } from './preview';
import { fullscreen } from './fullscreen';
import { image } from './image';
import { strikethrough } from './strikeThrough';
import insertText from '../utils/InsertTextAtPosition';

var getCommands = function getCommands() {
  return [comment, bold, italic, strikethrough, hr, title, divider, link, quote, code, codeBlock, image, divider, unorderedListCommand, orderedListCommand, checkedListCommand];
};

var getExtraCommands = function getExtraCommands() {
  return [codeEdit, codeLive, codePreview, divider, fullscreen];
};

function getStateFromTextArea(textArea) {
  return {
    selection: {
      start: textArea.selectionStart,
      end: textArea.selectionEnd
    },
    text: textArea.value,
    selectedText: textArea.value.slice(textArea.selectionStart, textArea.selectionEnd)
  };
}

var TextAreaTextApi = /*#__PURE__*/function () {
  function TextAreaTextApi(textArea) {
    _classCallCheck(this, TextAreaTextApi);

    this.textArea = void 0;
    this.textArea = textArea;
  }
  /**
   * Replaces the current selection with the new text. This will make the new selectedText to be empty, the
   * selection start and selection end will be the same and will both point to the end
   * @param text Text that should replace the current selection
   */


  _createClass(TextAreaTextApi, [{
    key: "replaceSelection",
    value: function replaceSelection(text) {
      insertText(this.textArea, text);
      return getStateFromTextArea(this.textArea);
    }
    /**
     * Selects the specified text range
     * @param selection
     */

  }, {
    key: "setSelectionRange",
    value: function setSelectionRange(selection) {
      this.textArea.focus();
      this.textArea.selectionStart = selection.start;
      this.textArea.selectionEnd = selection.end;
      return getStateFromTextArea(this.textArea);
    }
  }]);

  return TextAreaTextApi;
}();

var TextAreaCommandOrchestrator = /*#__PURE__*/function () {
  function TextAreaCommandOrchestrator(textArea) {
    _classCallCheck(this, TextAreaCommandOrchestrator);

    this.textArea = void 0;
    this.textApi = void 0;
    this.textArea = textArea;
    this.textApi = new TextAreaTextApi(textArea);
  }

  _createClass(TextAreaCommandOrchestrator, [{
    key: "getState",
    value: function getState() {
      if (!this.textArea) return false;
      return getStateFromTextArea(this.textArea);
    }
  }, {
    key: "executeCommand",
    value: function executeCommand(command, dispatch, state) {
      command.execute && command.execute(getStateFromTextArea(this.textArea), this.textApi, dispatch, state);
    }
  }]);

  return TextAreaCommandOrchestrator;
}();

export { // Toolbars.
title, title1, title2, title3, title4, title5, title6, bold, codeBlock, italic, strikethrough, hr, group, divider, link, quote, code, image, unorderedListCommand, orderedListCommand, checkedListCommand, codeEdit, codeLive, codePreview, fullscreen // Tool method.
, getCommands, getExtraCommands, getStateFromTextArea, TextAreaCommandOrchestrator, TextAreaTextApi };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9pbmRleC50cyJdLCJuYW1lcyI6WyJib2xkIiwiY29kZSIsImNvZGVCbG9jayIsIml0YWxpYyIsImxpbmsiLCJ1bm9yZGVyZWRMaXN0Q29tbWFuZCIsIm9yZGVyZWRMaXN0Q29tbWFuZCIsImNoZWNrZWRMaXN0Q29tbWFuZCIsInF1b3RlIiwiaHIiLCJ0aXRsZSIsInRpdGxlMSIsInRpdGxlMiIsInRpdGxlMyIsInRpdGxlNCIsInRpdGxlNSIsInRpdGxlNiIsImNvbW1lbnQiLCJncm91cCIsImRpdmlkZXIiLCJjb2RlUHJldmlldyIsImNvZGVFZGl0IiwiY29kZUxpdmUiLCJmdWxsc2NyZWVuIiwiaW1hZ2UiLCJzdHJpa2V0aHJvdWdoIiwiaW5zZXJ0VGV4dCIsImdldENvbW1hbmRzIiwiZ2V0RXh0cmFDb21tYW5kcyIsImdldFN0YXRlRnJvbVRleHRBcmVhIiwidGV4dEFyZWEiLCJzZWxlY3Rpb24iLCJzdGFydCIsInNlbGVjdGlvblN0YXJ0IiwiZW5kIiwic2VsZWN0aW9uRW5kIiwidGV4dCIsInZhbHVlIiwic2VsZWN0ZWRUZXh0Iiwic2xpY2UiLCJUZXh0QXJlYVRleHRBcGkiLCJmb2N1cyIsIlRleHRBcmVhQ29tbWFuZE9yY2hlc3RyYXRvciIsInRleHRBcGkiLCJjb21tYW5kIiwiZGlzcGF0Y2giLCJzdGF0ZSIsImV4ZWN1dGUiXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBU0EsSUFBVCxRQUFxQixRQUFyQjtBQUNBLFNBQVNDLElBQVQsRUFBZUMsU0FBZixRQUFnQyxRQUFoQztBQUNBLFNBQVNDLE1BQVQsUUFBdUIsVUFBdkI7QUFDQSxTQUFTQyxJQUFULFFBQXFCLFFBQXJCO0FBQ0EsU0FBU0Msb0JBQVQsRUFBK0JDLGtCQUEvQixFQUFtREMsa0JBQW5ELFFBQTZFLFFBQTdFO0FBQ0EsU0FBU0MsS0FBVCxRQUFzQixTQUF0QjtBQUNBLFNBQVNDLEVBQVQsUUFBbUIsTUFBbkI7QUFDQSxTQUFTQyxLQUFULFFB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S0FBS0EsUUFBVixFQUFvQixPQUFPLEtBQVA7QUFDcEIsYUFBT0Qsb0JBQW9CLENBQUMsS0FBS0MsUUFBTixDQUEzQjtBQUNEOzs7V0FFRCx3QkFDRWMsT0FERixFQUVFQyxRQUZGLEVBR0VDLEtBSEYsRUFJUTtBQUNORixNQUFBQSxPQUFPLENBQUNHLE9BQVIsSUFBbUJILE9BQU8sQ0FBQ0csT0FBUixDQUFnQmxCLG9CQUFvQixDQUFDLEtBQUtDLFFBQU4sQ0FBcEMsRUFBcUQsS0FBS2EsT0FBMUQsRUFBbUVFLFFBQW5FLEVBQTZFQyxLQUE3RSxDQUFuQjtBQUNEOzs7Ozs7QUFHSCxTQUNFO0FBQ0FwQyxLQUZGLEVBR0VDLE1BSEYsRUFJRUMsTUFKRixFQUtFQyxNQUxGLEVBTUVDLE1BTkYsRUFPRUMsTUFQRixFQVFFQyxNQVJGLEVBU0VoQixJQVRGLEVBVUVFLFNBVkYsRUFXRUMsTUFYRixFQVlFc0IsYUFaRixFQWFFaEIsRUFiRixFQWNFUyxLQWRGLEVBZUVDLE9BZkYsRUFnQkVmLElBaEJGLEVBaUJFSSxLQWpCRixFQWtCRVAsSUFsQkYsRUFtQkV1QixLQW5CRixFQW9CRW5CLG9CQXBCRixFQXFCRUMsa0JBckJGLEVBc0JFQyxrQkF0QkYsRUF1QkVjLFFBdkJGLEVBd0JFQyxRQXhCRixFQXlCRUYsV0F6QkYsRUEwQkVHLFVBMUJGLENBMkJFO0FBM0JGLEVBNEJFSSxXQTVCRixFQTZCRUMsZ0JBN0JGLEVBOEJFQyxvQkE5QkYsRUErQkVhLDJCQS9CRixFQWdDRUYsZUFoQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBib2xkIH0gZnJvbSAnLi9ib2xkJztcbmltcG9ydCB7IGNvZGUsIGNvZGVCbG9jayB9IGZyb20gJy4vY29kZSc7XG5pbXBvcnQgeyBpdGFsaWMgfSBmcm9tICcuL2l0YWxpYyc7XG5pbXBvcnQgeyBsaW5rIH0gZnJvbSAnLi9saW5rJztcbmltcG9ydCB7IHVub3JkZXJlZExpc3RDb21tYW5kLCBvcmRlcmVkTGlzdENvbW1hbmQsIGNoZWNrZWRMaXN0Q29tbWFuZCB9IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgeyBxdW90ZSB9IGZyb20gJy4vcXVvdGUnO1xuaW1wb3J0IHsgaHIgfSBmcm9tICcuL2hyJztcbmltcG9ydCB7IHRpdGxlIH0gZnJvbSAnLi90aXRsZSc7XG5pbXBvcnQgeyB0aXRsZTEgfSBmcm9tICcuL3RpdGxlMSc7XG5pbXBvcnQgeyB0aXRsZTIgfSBmcm9tICcuL3RpdGxlMic7XG5pbXBvcnQgeyB0aXRsZTMgfSBmcm9tICcuL3RpdGxlMyc7XG5pbXBvcnQgeyB0aXRsZTQgfSBmcm9tICcuL3RpdGxlNCc7XG5pbXBvcnQgeyB0aXRsZTUgfSBmcm9tICcuL3RpdGxlNSc7XG5pbXBvcnQgeyB0aXRsZTYgfSBmcm9tICcuL3RpdGxlNic7XG5pbXBvcnQgeyBjb21tZW50IH0gZnJvbSAnLi9jb21tZW50JztcbmltcG9ydCB7IGdyb3VwIH0gZnJvbSAnLi9ncm91cCc7XG5pbXBvcnQgeyBkaXZpZGVyIH0gZnJvbSAnLi9kaXZpZGVyJztcbmltcG9ydCB7IGNvZGVQcmV2aWV3LCBjb2RlRWRpdCwgY29kZUxpdmUgfSBmcm9tICcuL3ByZXZpZXcnO1xuaW1wb3J0IHsgZnVsbHNjcmVlbiB9IGZyb20gJy4vZnVsbHNjcmVlbic7XG5pbXBvcnQgeyBpbWFnZSB9IGZyb20gJy4vaW1hZ2UnO1xuaW1wb3J0IHsgc3RyaWtldGhyb3VnaCB9IGZyb20gJy4vc3RyaWtlVGhyb3VnaCc7XG5pbXBvcnQgaW5zZXJ0VGV4dCBmcm9tICcuLi91dGlscy9JbnNlcnRUZXh0QXRQb3NpdGlvbic7XG5pbXBvcnQgeyBDb250ZXh0U3RvcmUsIEV4ZWN1dGVDb21tYW5kU3RhdGUgfSBmcm9tICcuLi9Db250ZXh0JztcblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kT3JjaGVzdHJhdG9yIHtcbiAgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZDogSUNvbW1hbmQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb21tYW5kQ2hpbGRIYW5kbGU8VCA9IHN0cmluZz4gZXh0ZW5kcyBJQ29tbWFuZEJhc2U8VD4ge1xuICBjaGlsZHJlbj86IChoYW5kbGU6IHtcbiAgICBjbG9zZTogKCkgPT4gdm9pZDtcbiAgICBleGVjdXRlOiAoKSA9PiB2b2lkO1xuICAgIGdldFN0YXRlPzogVGV4dEFyZWFDb21tYW5kT3JjaGVzdHJhdG9yWydnZXRTdGF0ZSddO1xuICAgIHRleHRBcGk/OiBUZXh0QXJlYVRleHRBcGk7XG4gIH0pID0+IFJlYWN0LlJlYWN0RWxlbWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29tbWFuZENoaWxkQ29tbWFuZHM8VCA9IHN0cmluZz4gZXh0ZW5kcyBJQ29tbWFuZEJhc2U8VD4ge1xuICBjaGlsZHJlbj86IEFycmF5PElDb21tYW5kPFQ+Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29tbWFuZEJhc2U8VD4ge1xuICBwYXJlbnQ/OiBJQ29tbWFuZDxhbnk+O1xuICBrZXlDb21tYW5kPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBzaG9ydGN1dHM/OiBzdHJpbmc7XG4gIGdyb3VwTmFtZT86IHN0cmluZztcbiAgaWNvbj86IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgdmFsdWU/OiBUO1xuICBwb3NpdGlvbj86ICdyaWdodCc7XG4gIGxpUHJvcHM/OiBSZWFjdC5MaUhUTUxBdHRyaWJ1dGVzPEhUTUxMSUVsZW1lbnQ+O1xuICBidXR0b25Qcm9wcz86IFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PiB8IG51bGw7XG4gIGV4ZWN1dGU/OiAoXG4gICAgc3RhdGU6IFRleHRTdGF0ZSxcbiAgICBhcGk6IFRleHRBcmVhVGV4dEFwaSxcbiAgICBkaXNwYXRjaD86IFJlYWN0LkRpc3BhdGNoPENvbnRleHRTdG9yZT4sXG4gICAgZXhlY3V0ZUNvbW1hbmRTdGF0ZT86IEV4ZWN1dGVDb21tYW5kU3RhdGUsXG4gICkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgSUNvbW1hbmQ8VCA9IHN0cmluZz4gPSBJQ29tbWFuZENoaWxkQ29tbWFuZHM8VD4gfCBJQ29tbWFuZENoaWxkSGFuZGxlPFQ+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRSYW5nZSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIGVuZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRTdGF0ZSB7XG4gIHRleHQ6IHN0cmluZztcbiAgc2VsZWN0ZWRUZXh0OiBzdHJpbmc7XG4gIHNlbGVjdGlvbjogVGV4dFJhbmdlO1xufVxuXG5jb25zdCBnZXRDb21tYW5kczogKCkgPT4gSUNvbW1hbmRbXSA9ICgpID0+IFtcbiAgY29tbWVudCxcbiAgYm9sZCxcbiAgaXRhbGljLFxuICBzdHJpa2V0aHJvdWdoLFxuICBocixcbiAgdGl0bGUsXG4gIGRpdmlkZXIsXG4gIGxpbmssXG4gIHF1b3RlLFxuICBjb2RlLFxuICBjb2RlQmxvY2ssXG4gIGltYWdlLFxuICBkaXZpZGVyLFxuICB1bm9yZGVyZWRMaXN0Q29tbWFuZCxcbiAgb3JkZXJlZExpc3RDb21tYW5kLFxuICBjaGVja2VkTGlzdENvbW1hbmQsXG5dO1xuXG5jb25zdCBnZXRFeHRyYUNvbW1hbmRzOiAoKSA9PiBJQ29tbWFuZFtdID0gKCkgPT4gW2NvZGVFZGl0LCBjb2RlTGl2ZSwgY29kZVByZXZpZXcsIGRpdmlkZXIsIGZ1bGxzY3JlZW5dO1xuXG5mdW5jdGlvbiBnZXRTdGF0ZUZyb21UZXh0QXJlYSh0ZXh0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCk6IFRleHRTdGF0ZSB7XG4gIHJldHVybiB7XG4gICAgc2VsZWN0aW9uOiB7XG4gICAgICBzdGFydDogdGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQsXG4gICAgICBlbmQ6IHRleHRBcmVhLnNlbGVjdGlvbkVuZCxcbiAgICB9LFxuICAgIHRleHQ6IHRleHRBcmVhLnZhbHVlLFxuICAgIHNlbGVjdGVkVGV4dDogdGV4dEFyZWEudmFsdWUuc2xpY2UodGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQsIHRleHRBcmVhLnNlbGVjdGlvbkVuZCksXG4gIH07XG59XG5cbmNsYXNzIFRleHRBcmVhVGV4dEFwaSB7XG4gIHRleHRBcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKHRleHRBcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XG4gICAgdGhpcy50ZXh0QXJlYSA9IHRleHRBcmVhO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoZSBjdXJyZW50IHNlbGVjdGlvbiB3aXRoIHRoZSBuZXcgdGV4dC4gVGhpcyB3aWxsIG1ha2UgdGhlIG5ldyBzZWxlY3RlZFRleHQgdG8gYmUgZW1wdHksIHRoZVxuICAgKiBzZWxlY3Rpb24gc3RhcnQgYW5kIHNlbGVjdGlvbiBlbmQgd2lsbCBiZSB0aGUgc2FtZSBhbmQgd2lsbCBib3RoIHBvaW50IHRvIHRoZSBlbmRcbiAgICogQHBhcmFtIHRleHQgVGV4dCB0aGF0IHNob3VsZCByZXBsYWNlIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgKi9cbiAgcmVwbGFjZVNlbGVjdGlvbih0ZXh0OiBzdHJpbmcpOiBUZXh0U3RhdGUge1xuICAgIGluc2VydFRleHQodGhpcy50ZXh0QXJlYSwgdGV4dCk7XG4gICAgcmV0dXJuIGdldFN0YXRlRnJvbVRleHRBcmVhKHRoaXMudGV4dEFyZWEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgdGhlIHNwZWNpZmllZCB0ZXh0IHJhbmdlXG4gICAqIEBwYXJhbSBzZWxlY3Rpb25cbiAgICovXG4gIHNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvbjogVGV4dFJhbmdlKTogVGV4dFN0YXRlIHtcbiAgICB0aGlzLnRleHRBcmVhLmZvY3VzKCk7XG4gICAgdGhpcy50ZXh0QXJlYS5zZWxlY3Rpb25TdGFydCA9IHNlbGVjdGlvbi5zdGFydDtcbiAgICB0aGlzLnRleHRBcmVhLnNlbGVjdGlvbkVuZCA9IHNlbGVjdGlvbi5lbmQ7XG4gICAgcmV0dXJuIGdldFN0YXRlRnJvbVRleHRBcmVhKHRoaXMudGV4dEFyZWEpO1xuICB9XG59XG5cbmNsYXNzIFRleHRBcmVhQ29tbWFuZE9yY2hlc3RyYXRvciBpbXBsZW1lbnRzIENvbW1hbmRPcmNoZXN0cmF0b3Ige1xuICB0ZXh0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgdGV4dEFwaTogVGV4dEFyZWFUZXh0QXBpO1xuXG4gIGNvbnN0cnVjdG9yKHRleHRBcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XG4gICAgdGhpcy50ZXh0QXJlYSA9IHRleHRBcmVhO1xuICAgIHRoaXMudGV4dEFwaSA9IG5ldyBUZXh0QXJlYVRleHRBcGkodGV4dEFyZWEpO1xuICB9XG5cbiAgZ2V0U3RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLnRleHRBcmVhKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGdldFN0YXRlRnJvbVRleHRBcmVhKHRoaXMudGV4dEFyZWEpO1xuICB9XG5cbiAgZXhlY3V0ZUNvbW1hbmQoXG4gICAgY29tbWFuZDogSUNvbW1hbmQ8c3RyaW5nPixcbiAgICBkaXNwYXRjaD86IFJlYWN0LkRpc3BhdGNoPENvbnRleHRTdG9yZT4sXG4gICAgc3RhdGU/OiBFeGVjdXRlQ29tbWFuZFN0YXRlLFxuICApOiB2b2lkIHtcbiAgICBjb21tYW5kLmV4ZWN1dGUgJiYgY29tbWFuZC5leGVjdXRlKGdldFN0YXRlRnJvbVRleHRBcmVhKHRoaXMudGV4dEFyZWEpLCB0aGlzLnRleHRBcGksIGRpc3BhdGNoLCBzdGF0ZSk7XG4gIH1cbn1cblxuZXhwb3J0IHtcbiAgLy8gVG9vbGJhcnMuXG4gIHRpdGxlLFxuICB0aXRsZTEsXG4gIHRpdGxlMixcbiAgdGl0bGUzLFxuICB0aXRsZTQsXG4gIHRpdGxlNSxcbiAgdGl0bGU2LFxuICBib2xkLFxuICBjb2RlQmxvY2ssXG4gIGl0YWxpYyxcbiAgc3RyaWtldGhyb3VnaCxcbiAgaHIsXG4gIGdyb3VwLFxuICBkaXZpZGVyLFxuICBsaW5rLFxuICBxdW90ZSxcbiAgY29kZSxcbiAgaW1hZ2UsXG4gIHVub3JkZXJlZExpc3RDb21tYW5kLFxuICBvcmRlcmVkTGlzdENvbW1hbmQsXG4gIGNoZWNrZWRMaXN0Q29tbWFuZCxcbiAgY29kZUVkaXQsXG4gIGNvZGVMaXZlLFxuICBjb2RlUHJldmlldyxcbiAgZnVsbHNjcmVlbixcbiAgLy8gVG9vbCBtZXRob2QuXG4gIGdldENvbW1hbmRzLFxuICBnZXRFeHRyYUNvbW1hbmRzLFxuICBnZXRTdGF0ZUZyb21UZXh0QXJlYSxcbiAgVGV4dEFyZWFDb21tYW5kT3JjaGVzdHJhdG9yLFxuICBUZXh0QXJlYVRleHRBcGksXG59O1xuIl19