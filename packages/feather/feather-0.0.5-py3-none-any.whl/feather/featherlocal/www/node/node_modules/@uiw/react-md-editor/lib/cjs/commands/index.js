"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getStateFromTextArea = getStateFromTextArea;
Object.defineProperty(exports, "bold", {
  enumerable: true,
  get: function get() {
    return _bold.bold;
  }
});
Object.defineProperty(exports, "code", {
  enumerable: true,
  get: function get() {
    return _code.code;
  }
});
Object.defineProperty(exports, "codeBlock", {
  enumerable: true,
  get: function get() {
    return _code.codeBlock;
  }
});
Object.defineProperty(exports, "italic", {
  enumerable: true,
  get: function get() {
    return _italic.italic;
  }
});
Object.defineProperty(exports, "link", {
  enumerable: true,
  get: function get() {
    return _link.link;
  }
});
Object.defineProperty(exports, "unorderedListCommand", {
  enumerable: true,
  get: function get() {
    return _list.unorderedListCommand;
  }
});
Object.defineProperty(exports, "orderedListCommand", {
  enumerable: true,
  get: function get() {
    return _list.orderedListCommand;
  }
});
Object.defineProperty(exports, "checkedListCommand", {
  enumerable: true,
  get: function get() {
    return _list.checkedListCommand;
  }
});
Object.defineProperty(exports, "quote", {
  enumerable: true,
  get: function get() {
    return _quote.quote;
  }
});
Object.defineProperty(exports, "hr", {
  enumerable: true,
  get: function get() {
    return _hr.hr;
  }
});
Object.defineProperty(exports, "title", {
  enumerable: true,
  get: function get() {
    return _title.title;
  }
});
Object.defineProperty(exports, "title1", {
  enumerable: true,
  get: function get() {
    return _title2.title1;
  }
});
Object.defineProperty(exports, "title2", {
  enumerable: true,
  get: function get() {
    return _title3.title2;
  }
});
Object.defineProperty(exports, "title3", {
  enumerable: true,
  get: function get() {
    return _title4.title3;
  }
});
Object.defineProperty(exports, "title4", {
  enumerable: true,
  get: function get() {
    return _title5.title4;
  }
});
Object.defineProperty(exports, "title5", {
  enumerable: true,
  get: function get() {
    return _title6.title5;
  }
});
Object.defineProperty(exports, "title6", {
  enumerable: true,
  get: function get() {
    return _title7.title6;
  }
});
Object.defineProperty(exports, "group", {
  enumerable: true,
  get: function get() {
    return _group.group;
  }
});
Object.defineProperty(exports, "divider", {
  enumerable: true,
  get: function get() {
    return _divider.divider;
  }
});
Object.defineProperty(exports, "codePreview", {
  enumerable: true,
  get: function get() {
    return _preview.codePreview;
  }
});
Object.defineProperty(exports, "codeEdit", {
  enumerable: true,
  get: function get() {
    return _preview.codeEdit;
  }
});
Object.defineProperty(exports, "codeLive", {
  enumerable: true,
  get: function get() {
    return _preview.codeLive;
  }
});
Object.defineProperty(exports, "fullscreen", {
  enumerable: true,
  get: function get() {
    return _fullscreen.fullscreen;
  }
});
Object.defineProperty(exports, "image", {
  enumerable: true,
  get: function get() {
    return _image.image;
  }
});
Object.defineProperty(exports, "strikethrough", {
  enumerable: true,
  get: function get() {
    return _strikeThrough.strikethrough;
  }
});
exports.TextAreaTextApi = exports.TextAreaCommandOrchestrator = exports.getExtraCommands = exports.getCommands = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _bold = require("./bold");

var _code = require("./code");

var _italic = require("./italic");

var _link = require("./link");

var _list = require("./list");

var _quote = require("./quote");

var _hr = require("./hr");

var _title = require("./title");

var _title2 = require("./title1");

var _title3 = require("./title2");

var _title4 = require("./title3");

var _title5 = require("./title4");

var _title6 = require("./title5");

var _title7 = require("./title6");

var _comment = require("./comment");

var _group = require("./group");

var _divider = require("./divider");

var _preview = require("./preview");

var _fullscreen = require("./fullscreen");

var _image = require("./image");

var _strikeThrough = require("./strikeThrough");

var _InsertTextAtPosition = _interopRequireDefault(require("../utils/InsertTextAtPosition"));

var getCommands = function getCommands() {
  return [_comment.comment, _bold.bold, _italic.italic, _strikeThrough.strikethrough, _hr.hr, _title.title, _divider.divider, _link.link, _quote.quote, _code.code, _code.codeBlock, _image.image, _divider.divider, _list.unorderedListCommand, _list.orderedListCommand, _list.checkedListCommand];
};

exports.getCommands = getCommands;

var getExtraCommands = function getExtraCommands() {
  return [_preview.codeEdit, _preview.codeLive, _preview.codePreview, _divider.divider, _fullscreen.fullscreen];
};

exports.getExtraCommands = getExtraCommands;

function getStateFromTextArea(textArea) {
  return {
    selection: {
      start: textArea.selectionStart,
      end: textArea.selectionEnd
    },
    text: textArea.value,
    selectedText: textArea.value.slice(textArea.selectionStart, textArea.selectionEnd)
  };
}

var TextAreaTextApi = /*#__PURE__*/function () {
  function TextAreaTextApi(textArea) {
    (0, _classCallCheck2.default)(this, TextAreaTextApi);
    this.textArea = void 0;
    this.textArea = textArea;
  }
  /**
   * Replaces the current selection with the new text. This will make the new selectedText to be empty, the
   * selection start and selection end will be the same and will both point to the end
   * @param text Text that should replace the current selection
   */


  (0, _createClass2.default)(TextAreaTextApi, [{
    key: "replaceSelection",
    value: function replaceSelection(text) {
      (0, _InsertTextAtPosition.default)(this.textArea, text);
      return getStateFromTextArea(this.textArea);
    }
    /**
     * Selects the specified text range
     * @param selection
     */

  }, {
    key: "setSelectionRange",
    value: function setSelectionRange(selection) {
      this.textArea.focus();
      this.textArea.selectionStart = selection.start;
      this.textArea.selectionEnd = selection.end;
      return getStateFromTextArea(this.textArea);
    }
  }]);
  return TextAreaTextApi;
}();

exports.TextAreaTextApi = TextAreaTextApi;

var TextAreaCommandOrchestrator = /*#__PURE__*/function () {
  function TextAreaCommandOrchestrator(textArea) {
    (0, _classCallCheck2.default)(this, TextAreaCommandOrchestrator);
    this.textArea = void 0;
    this.textApi = void 0;
    this.textArea = textArea;
    this.textApi = new TextAreaTextApi(textArea);
  }

  (0, _createClass2.default)(TextAreaCommandOrchestrator, [{
    key: "getState",
    value: function getState() {
      if (!this.textArea) return false;
      return getStateFromTextArea(this.textArea);
    }
  }, {
    key: "executeCommand",
    value: function executeCommand(command, dispatch, state) {
      command.execute && command.execute(getStateFromTextArea(this.textArea), this.textApi, dispatch, state);
    }
  }]);
  return TextAreaCommandOrchestrator;
}();

exports.TextAreaCommandOrchestrator = TextAreaCommandOrchestrator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9pbmRleC50cyJdLCJuYW1lcyI6WyJnZXRDb21tYW5kcyIsImNvbW1lbnQiLCJib2xkIiwiaXRhbGljIiwic3RyaWtldGhyb3VnaCIsImhyIiwidGl0bGUiLCJkaXZpZGVyIiwibGluayIsInF1b3RlIiwiY29kZSIsImNvZGVCbG9jayIsImltYWdlIiwidW5vcmRlcmVkTGlzdENvbW1hbmQiLCJvcmRlcmVkTGlzdENvbW1hbmQiLCJjaGVja2VkTGlzdENvbW1hbmQiLCJnZXRFeHRyYUNvbW1hbmRzIiwiY29kZUVkaXQiLCJjb2RlTGl2ZSIsImNvZGVQcmV2aWV3IiwiZnVsbHNjcmVlbiIsImdldFN0YXRlRnJvbVRleHRBcmVhIiwidGV4dEFyZWEiLCJzZWxlY3Rpb24iLCJzdGFydCIsInNlbGVjdGlvblN0YXJ0IiwiZW5kIiwic2VsZWN0aW9uRW5kIiwidGV4dCIsInZhbHVlIiwic2VsZWN0ZWRUZXh0Iiwic2xpY2UiLCJUZXh0QXJlYVRleHRBcGkiLCJmb2N1cyIsIlRleHRBcmVhQ29tbWFuZE9yY2hlc3RyYXRvciIsInRleHRBcGkiLCJjb21tYW5kIiwiZGlzcGF0Y2giLCJzdGF0ZSIsImV4ZWN1dGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBb0RBLElBQU1BLFdBQTZCLEdBQUcsU0FBaENBLFdBQWdDO0FBQUEsU0FBTSxDQUMxQ0MsZ0JBRDBDLEVBRTFDQyxVQUYwQyxFQUcxQ0MsY0FIMEMsRUFJMUNDLDRCQUowQyxFQUsxQ0MsTUFMMEMsRUFNMUNDLFlBTjBDLEVBTzFDQyxnQkFQMEMsRUFRMUNDLFVBUjBDLEVBUzFDQyxZQVQwQyxFQVUxQ0MsVUFWMEMsRUFXMUNDLGVBWDBDLEVBWTFDQyxZQVowQyxFQWExQ0wsZ0JBYjBDLEVBYzFDTSwwQkFkMEMsRUFlMUNDLHdCQWYwQyxFQWdCMUNDLHdCQWhCMEMsQ0FBTjtBQUFBLENBQXRDOzs7O0FBbUJBLElBQU1DLGdCQUFrQyxHQUFHLFNBQXJDQSxnQkFBcUM7QUFBQSxTQUFNLENBQUNDLGlCQUFELEVBQVdDLGlCQUFYLEVBQXFCQyxvQkFBckIsRUFBa0NaLGdCQUFsQyxFQUEyQ2Esc0JBQTNDLENBQU47QUFBQSxDQUEzQzs7OztBQUVBLFNBQVNDLG9CQUFULENBQThCQyxRQUE5QixFQUF3RTtBQUN0RSxTQUFPO0FBQ0xDLElBQUFBLFNBQVMsRUFBRTtBQUNUQyxNQUFBQSxLQUFLLEVBQUVGLFFBQVEsQ0FBQ0csY0FEUDtBQUVUQyxNQUFBQSxHQUFHLEVBQUVKLFFBQVEsQ0FBQ0s7QUFGTCxLQUROO0FBS0xDLElBQUFBLElBQUksRUFBRU4sUUFBUSxDQUFDTyxLQUxWO0FBTUxDLElBQUFBLFlBQVksRUFBRVIsUUFBUSxDQUFDTyxLQUFULENBQWVFLEtBQWYsQ0FBcUJULFFBQVEsQ0FBQ0csY0FBOUIsRUFBOENILFFBQVEsQ0FBQ0ssWUFBdkQ7QUFOVCxHQUFQO0FBUUQ7O0lBRUtLLGU7QUFHSiwyQkFBWVYsUUFBWixFQUEyQztBQUFBO0FBQUEsU0FGM0NBLFFBRTJDO0FBQ3pDLFNBQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7OztXQUNFLDBCQUFpQk0sSUFBakIsRUFBMEM7QUFDeEMseUNBQVcsS0FBS04sUUFBaEIsRUFBMEJNLElBQTFCO0FBQ0EsYUFBT1Asb0JBQW9CLENBQUMsS0FBS0MsUUFBTixDQUEzQjtBQUNEO0FBRUQ7QUFDRjtBQUNBO0FBQ0E7Ozs7V0FDRSwyQkFBa0JDLFNBQWxCLEVBQW1EO0FBQ2pELFdBQUtELFFBQUwsQ0FBY1csS0FBZDtBQUNBLFdBQUtYLFFBQUwsQ0FBY0csY0FBZCxHQUErQkYsU0FBUyxDQUFDQyxLQUF6QztBQUNBLFdBQUtGLFFBQUwsQ0FBY0ssWUFBZCxHQUE2QkosU0FBUyxDQUFDRyxHQUF2QztBQUNBLGFBQU9MLG9CQUFvQixDQUFDLEtBQUtDLFFBQU4sQ0FBM0I7QUFDRDs7Ozs7OztJQUdHWSwyQjtBQUlKLHVDQUFZWixRQUFaLEVBQTJDO0FBQUE7QUFBQSxTQUgzQ0EsUUFHMkM7QUFBQSxTQUYzQ2EsT0FFMkM7QUFDekMsU0FBS2IsUUFBTCxHQUFnQkEsUUFBaEI7QUFDQSxTQUFLYSxPQUFMLEdBQWUsSUFBSUgsZUFBSixDQUFvQlYsUUFBcEIsQ0FBZjtBQUNEOzs7O1dBRUQsb0JBQVc7QUFDVCxVQUFJLENBQUMsS0FBS0EsUUFBVixFQUFvQixPQUFPLEtBQVA7QUFDcEIsYUFBT0Qsb0JBQW9CLENBQUMsS0FBS0MsUUFBTixDQUEzQjtBQUNEOzs7V0FFRCx3QkFDRWMsT0FERixFQUVFQyxRQUZGLEVBR0VDLEtBSEYsRUFJUTtBQUNORixNQUFBQSxPQUFPLENBQUNHLE9BQVIsSUFBbUJILE9BQU8sQ0FBQ0csT0FBUixDQUFnQmxCLG9CQUFvQixDQUFDLEtBQUtDLFFBQU4sQ0FBcEMsRUFBcUQsS0FBS2EsT0FBMUQsRUFBbUVFLFFBQW5FLEVBQTZFQyxLQUE3RSxDQUFuQjtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYm9sZCB9IGZyb20gJy4vYm9sZCc7XG5pbXBvcnQgeyBjb2RlLCBjb2RlQmxvY2sgfSBmcm9tICcuL2NvZGUnO1xuaW1wb3J0IHsgaXRhbGljIH0gZnJvbSAnLi9pdGFsaWMnO1xuaW1wb3J0IHsgbGluayB9IGZyb20gJy4vbGluayc7XG5pbXBvcnQgeyB1bm9yZGVyZWRMaXN0Q29tbWFuZCwgb3JkZXJlZExpc3RDb21tYW5kLCBjaGVja2VkTGlzdENvbW1hbmQgfSBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IHsgcXVvdGUgfSBmcm9tICcuL3F1b3RlJztcbmltcG9ydCB7IGhyIH0gZnJvbSAnLi9ocic7XG5pbXBvcnQgeyB0aXRsZSB9IGZyb20gJy4vdGl0bGUnO1xuaW1wb3J0IHsgdGl0bGUxIH0gZnJvbSAnLi90aXRsZTEnO1xuaW1wb3J0IHsgdGl0bGUyIH0gZnJvbSAnLi90aXRsZTInO1xuaW1wb3J0IHsgdGl0bGUzIH0gZnJvbSAnLi90aXRsZTMnO1xuaW1wb3J0IHsgdGl0bGU0IH0gZnJvbSAnLi90aXRsZTQnO1xuaW1wb3J0IHsgdGl0bGU1IH0gZnJvbSAnLi90aXRsZTUnO1xuaW1wb3J0IHsgdGl0bGU2IH0gZnJvbSAnLi90aXRsZTYnO1xuaW1wb3J0IHsgY29tbWVudCB9IGZyb20gJy4vY29tbWVudCc7XG5pbXBvcnQgeyBncm91cCB9IGZyb20gJy4vZ3JvdXAnO1xuaW1wb3J0IHsgZGl2aWRlciB9IGZyb20gJy4vZGl2aWRlcic7XG5pbXBvcnQgeyBjb2RlUHJldmlldywgY29kZUVkaXQsIGNvZGVMaXZlIH0gZnJvbSAnLi9wcmV2aWV3JztcbmltcG9ydCB7IGZ1bGxzY3JlZW4gfSBmcm9tICcuL2Z1bGxzY3JlZW4nO1xuaW1wb3J0IHsgaW1hZ2UgfSBmcm9tICcuL2ltYWdlJztcbmltcG9ydCB7IHN0cmlrZXRocm91Z2ggfSBmcm9tICcuL3N0cmlrZVRocm91Z2gnO1xuaW1wb3J0IGluc2VydFRleHQgZnJvbSAnLi4vdXRpbHMvSW5zZXJ0VGV4dEF0UG9zaXRpb24nO1xuaW1wb3J0IHsgQ29udGV4dFN0b3JlLCBFeGVjdXRlQ29tbWFuZFN0YXRlIH0gZnJvbSAnLi4vQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZE9yY2hlc3RyYXRvciB7XG4gIGV4ZWN1dGVDb21tYW5kKGNvbW1hbmQ6IElDb21tYW5kKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29tbWFuZENoaWxkSGFuZGxlPFQgPSBzdHJpbmc+IGV4dGVuZHMgSUNvbW1hbmRCYXNlPFQ+IHtcbiAgY2hpbGRyZW4/OiAoaGFuZGxlOiB7XG4gICAgY2xvc2U6ICgpID0+IHZvaWQ7XG4gICAgZXhlY3V0ZTogKCkgPT4gdm9pZDtcbiAgICBnZXRTdGF0ZT86IFRleHRBcmVhQ29tbWFuZE9yY2hlc3RyYXRvclsnZ2V0U3RhdGUnXTtcbiAgICB0ZXh0QXBpPzogVGV4dEFyZWFUZXh0QXBpO1xuICB9KSA9PiBSZWFjdC5SZWFjdEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRDaGlsZENvbW1hbmRzPFQgPSBzdHJpbmc+IGV4dGVuZHMgSUNvbW1hbmRCYXNlPFQ+IHtcbiAgY2hpbGRyZW4/OiBBcnJheTxJQ29tbWFuZDxUPj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRCYXNlPFQ+IHtcbiAgcGFyZW50PzogSUNvbW1hbmQ8YW55PjtcbiAga2V5Q29tbWFuZD86IHN0cmluZztcbiAgbmFtZT86IHN0cmluZztcbiAgc2hvcnRjdXRzPzogc3RyaW5nO1xuICBncm91cE5hbWU/OiBzdHJpbmc7XG4gIGljb24/OiBSZWFjdC5SZWFjdEVsZW1lbnQ7XG4gIHZhbHVlPzogVDtcbiAgcG9zaXRpb24/OiAncmlnaHQnO1xuICBsaVByb3BzPzogUmVhY3QuTGlIVE1MQXR0cmlidXRlczxIVE1MTElFbGVtZW50PjtcbiAgYnV0dG9uUHJvcHM/OiBSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4gfCBudWxsO1xuICBleGVjdXRlPzogKFxuICAgIHN0YXRlOiBUZXh0U3RhdGUsXG4gICAgYXBpOiBUZXh0QXJlYVRleHRBcGksXG4gICAgZGlzcGF0Y2g/OiBSZWFjdC5EaXNwYXRjaDxDb250ZXh0U3RvcmU+LFxuICAgIGV4ZWN1dGVDb21tYW5kU3RhdGU/OiBFeGVjdXRlQ29tbWFuZFN0YXRlLFxuICApID0+IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIElDb21tYW5kPFQgPSBzdHJpbmc+ID0gSUNvbW1hbmRDaGlsZENvbW1hbmRzPFQ+IHwgSUNvbW1hbmRDaGlsZEhhbmRsZTxUPjtcblxuZXhwb3J0IGludGVyZmFjZSBUZXh0UmFuZ2Uge1xuICBzdGFydDogbnVtYmVyO1xuICBlbmQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0U3RhdGUge1xuICB0ZXh0OiBzdHJpbmc7XG4gIHNlbGVjdGVkVGV4dDogc3RyaW5nO1xuICBzZWxlY3Rpb246IFRleHRSYW5nZTtcbn1cblxuY29uc3QgZ2V0Q29tbWFuZHM6ICgpID0+IElDb21tYW5kW10gPSAoKSA9PiBbXG4gIGNvbW1lbnQsXG4gIGJvbGQsXG4gIGl0YWxpYyxcbiAgc3RyaWtldGhyb3VnaCxcbiAgaHIsXG4gIHRpdGxlLFxuICBkaXZpZGVyLFxuICBsaW5rLFxuICBxdW90ZSxcbiAgY29kZSxcbiAgY29kZUJsb2NrLFxuICBpbWFnZSxcbiAgZGl2aWRlcixcbiAgdW5vcmRlcmVkTGlzdENvbW1hbmQsXG4gIG9yZGVyZWRMaXN0Q29tbWFuZCxcbiAgY2hlY2tlZExpc3RDb21tYW5kLFxuXTtcblxuY29uc3QgZ2V0RXh0cmFDb21tYW5kczogKCkgPT4gSUNvbW1hbmRbXSA9ICgpID0+IFtjb2RlRWRpdCwgY29kZUxpdmUsIGNvZGVQcmV2aWV3LCBkaXZpZGVyLCBmdWxsc2NyZWVuXTtcblxuZnVuY3Rpb24gZ2V0U3RhdGVGcm9tVGV4dEFyZWEodGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQpOiBUZXh0U3RhdGUge1xuICByZXR1cm4ge1xuICAgIHNlbGVjdGlvbjoge1xuICAgICAgc3RhcnQ6IHRleHRBcmVhLnNlbGVjdGlvblN0YXJ0LFxuICAgICAgZW5kOiB0ZXh0QXJlYS5zZWxlY3Rpb25FbmQsXG4gICAgfSxcbiAgICB0ZXh0OiB0ZXh0QXJlYS52YWx1ZSxcbiAgICBzZWxlY3RlZFRleHQ6IHRleHRBcmVhLnZhbHVlLnNsaWNlKHRleHRBcmVhLnNlbGVjdGlvblN0YXJ0LCB0ZXh0QXJlYS5zZWxlY3Rpb25FbmQpLFxuICB9O1xufVxuXG5jbGFzcyBUZXh0QXJlYVRleHRBcGkge1xuICB0ZXh0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcblxuICBjb25zdHJ1Y3Rvcih0ZXh0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCkge1xuICAgIHRoaXMudGV4dEFyZWEgPSB0ZXh0QXJlYTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyB0aGUgY3VycmVudCBzZWxlY3Rpb24gd2l0aCB0aGUgbmV3IHRleHQuIFRoaXMgd2lsbCBtYWtlIHRoZSBuZXcgc2VsZWN0ZWRUZXh0IHRvIGJlIGVtcHR5LCB0aGVcbiAgICogc2VsZWN0aW9uIHN0YXJ0IGFuZCBzZWxlY3Rpb24gZW5kIHdpbGwgYmUgdGhlIHNhbWUgYW5kIHdpbGwgYm90aCBwb2ludCB0byB0aGUgZW5kXG4gICAqIEBwYXJhbSB0ZXh0IFRleHQgdGhhdCBzaG91bGQgcmVwbGFjZSB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICovXG4gIHJlcGxhY2VTZWxlY3Rpb24odGV4dDogc3RyaW5nKTogVGV4dFN0YXRlIHtcbiAgICBpbnNlcnRUZXh0KHRoaXMudGV4dEFyZWEsIHRleHQpO1xuICAgIHJldHVybiBnZXRTdGF0ZUZyb21UZXh0QXJlYSh0aGlzLnRleHRBcmVhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBzcGVjaWZpZWQgdGV4dCByYW5nZVxuICAgKiBAcGFyYW0gc2VsZWN0aW9uXG4gICAqL1xuICBzZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb246IFRleHRSYW5nZSk6IFRleHRTdGF0ZSB7XG4gICAgdGhpcy50ZXh0QXJlYS5mb2N1cygpO1xuICAgIHRoaXMudGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb24uc3RhcnQ7XG4gICAgdGhpcy50ZXh0QXJlYS5zZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb24uZW5kO1xuICAgIHJldHVybiBnZXRTdGF0ZUZyb21UZXh0QXJlYSh0aGlzLnRleHRBcmVhKTtcbiAgfVxufVxuXG5jbGFzcyBUZXh0QXJlYUNvbW1hbmRPcmNoZXN0cmF0b3IgaW1wbGVtZW50cyBDb21tYW5kT3JjaGVzdHJhdG9yIHtcbiAgdGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHRleHRBcGk6IFRleHRBcmVhVGV4dEFwaTtcblxuICBjb25zdHJ1Y3Rvcih0ZXh0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCkge1xuICAgIHRoaXMudGV4dEFyZWEgPSB0ZXh0QXJlYTtcbiAgICB0aGlzLnRleHRBcGkgPSBuZXcgVGV4dEFyZWFUZXh0QXBpKHRleHRBcmVhKTtcbiAgfVxuXG4gIGdldFN0YXRlKCkge1xuICAgIGlmICghdGhpcy50ZXh0QXJlYSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBnZXRTdGF0ZUZyb21UZXh0QXJlYSh0aGlzLnRleHRBcmVhKTtcbiAgfVxuXG4gIGV4ZWN1dGVDb21tYW5kKFxuICAgIGNvbW1hbmQ6IElDb21tYW5kPHN0cmluZz4sXG4gICAgZGlzcGF0Y2g/OiBSZWFjdC5EaXNwYXRjaDxDb250ZXh0U3RvcmU+LFxuICAgIHN0YXRlPzogRXhlY3V0ZUNvbW1hbmRTdGF0ZSxcbiAgKTogdm9pZCB7XG4gICAgY29tbWFuZC5leGVjdXRlICYmIGNvbW1hbmQuZXhlY3V0ZShnZXRTdGF0ZUZyb21UZXh0QXJlYSh0aGlzLnRleHRBcmVhKSwgdGhpcy50ZXh0QXBpLCBkaXNwYXRjaCwgc3RhdGUpO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIC8vIFRvb2xiYXJzLlxuICB0aXRsZSxcbiAgdGl0bGUxLFxuICB0aXRsZTIsXG4gIHRpdGxlMyxcbiAgdGl0bGU0LFxuICB0aXRsZTUsXG4gIHRpdGxlNixcbiAgYm9sZCxcbiAgY29kZUJsb2NrLFxuICBpdGFsaWMsXG4gIHN0cmlrZXRocm91Z2gsXG4gIGhyLFxuICBncm91cCxcbiAgZGl2aWRlcixcbiAgbGluayxcbiAgcXVvdGUsXG4gIGNvZGUsXG4gIGltYWdlLFxuICB1bm9yZGVyZWRMaXN0Q29tbWFuZCxcbiAgb3JkZXJlZExpc3RDb21tYW5kLFxuICBjaGVja2VkTGlzdENvbW1hbmQsXG4gIGNvZGVFZGl0LFxuICBjb2RlTGl2ZSxcbiAgY29kZVByZXZpZXcsXG4gIGZ1bGxzY3JlZW4sXG4gIC8vIFRvb2wgbWV0aG9kLlxuICBnZXRDb21tYW5kcyxcbiAgZ2V0RXh0cmFDb21tYW5kcyxcbiAgZ2V0U3RhdGVGcm9tVGV4dEFyZWEsXG4gIFRleHRBcmVhQ29tbWFuZE9yY2hlc3RyYXRvcixcbiAgVGV4dEFyZWFUZXh0QXBpLFxufTtcbiJdfQ==