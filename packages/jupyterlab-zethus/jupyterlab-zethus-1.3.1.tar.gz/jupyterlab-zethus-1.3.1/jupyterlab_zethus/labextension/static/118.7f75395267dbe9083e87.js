(self.webpackChunkjupyterlab_zethus=self.webpackChunkjupyterlab_zethus||[]).push([[118],{118:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IZethusTracker:()=>w,default:()=>G});var o=n(751),i=n(138),a=n(621),s=n(357),r=n(904),c=n(797),d=n(981),u=n(55),l=n(886),h=n(510);const p=new(n(950).LabIcon)({name:"jupyterlab-zethus:icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><path class="jp-icon3 jp-icon-selectable" fill="#616161" d="M27.87475805 65.8655666l14.3661193 24.88603303L56.60900197 65.8655666zM68.87956088 44.61116983L59.9999997 29.23236345H6.72263264l8.87956118 15.37880638zM92.12524136 54.13443904l-14.3661193-24.8840277-14.36812462 24.8840277zM51.12043853 75.38883581L59.9999997 90.7676422h53.27736707l-8.87956118-15.37880638z"/></svg>'});let f=0;class g extends u.DocumentWidget{constructor(e,t,n){super(Object.assign({},e)),this.countSetConfig=0,this._ready=new c.PromiseDelegate,this.title.icon=p,f+=1,this.zethusId=f,this.context=e.context,this._onTitleChanged(),this.context.pathChanged.connect(this._onTitleChanged,this),this.context.ready.then((()=>{this._onContextReady()})),this._defaultROSEndpoint=t,this._defaultROSPKGSEndpoint=n,window.onmessage=e=>{e.data&&"save"===e.data&&(e.preventDefault(),this.context.save())}}loadEditor(e){var t;const n=l.PageConfig.getBaseUrl();if(this.iframe){this.countSetConfig++;const n=new CustomEvent("SetConfig",{detail:{config:e}});null===(t=this.iframe.contentDocument)||void 0===t||t.dispatchEvent(n)}else{this.iframe=document.createElement("iframe"),this.iframe.className="jp-iframe-zethus";const t=encodeURIComponent(JSON.stringify(e));this.iframe.src=n+`zethus/app/index.html?config=${t}&zethusId=${this.zethusId}&bridge=${this._defaultROSEndpoint}&pkgs=${this._defaultROSPKGSEndpoint}`,this.content.node.appendChild(this.iframe),window.document.addEventListener(`ZethusUpdateConfig${this.zethusId}`,(e=>{this.countSetConfig<=0?this._saveToContext(e.detail.config):this.countSetConfig--}),!1)}}_onContextReady(){const e=this.context.model;""===this.context.model.toString()&&this.context.model.fromString(`{\n        "panels": {\n          "sidebar": {\n            "display": true,\n            "collapsed": false\n          },\n          "header": {\n            "display": true\n          },\n          "info": {\n            "display": true,\n            "collapsed": true\n          }\n        },\n        "ros": {\n          "endpoint": "${this._defaultROSEndpoint}",\n          "pkgsEndpoint": "${this._defaultROSPKGSEndpoint}"\n        },\n        "infoTabs": [],\n        "visualizations": [],\n        "globalOptions": {\n          "display": true,\n          "backgroundColor": {\n            "display": true,\n            "value": 15790320\n          },\n          "fixedFrame": {\n            "display": true,\n            "value": "world"\n          },\n          "grid": {\n            "display": true,\n            "size": 30,\n            "divisions": 30,\n            "color": 11184810,\n            "centerlineColor": 7368816\n          }\n        },\n        "tools": {\n          "mode": "controls",\n          "controls": {\n            "display": false,\n            "enabled": true\n          },\n          "measure": {\n            "display": false\n          },\n          "custom": []\n        }\n      }`),this._onContentChanged(),e.contentChanged.connect(this._onContentChanged,this),this._ready.resolve(void 0)}_onTitleChanged(){this.title.label=l.PathExt.basename(this.context.localPath)}_onContentChanged(){try{const e=this.context.model.toString(),t=JSON.parse(e);console.log("Loading editor from content changed!"),this.loadEditor(t)}catch(e){}}_saveToContext(e){console.log("Saving content: ",e),this.context.ready.then((()=>{this.context.model.fromString(JSON.stringify(e,null,4))}))}onBeforeDetach(e){}get ready(){return this._ready.promise}}class m extends u.ABCWidgetFactory{constructor(e,t,n){super(e),this.defaultROSEndpoint=t,this.defaultROSPKGSEndpoint=n}createNewWidget(e){return new g({context:e,content:new h.Widget},this.defaultROSEndpoint,this.defaultROSPKGSEndpoint)}}var v=n(379),A=n.n(v),C=n(760);A()(C.Z,{insert:"head",singleton:!1}),C.Z.locals;const b="Zethus",w=new c.Token("zethus/tracki"),G={activate:function(e,t,n,o,a){const{commands:s}=e,r=new i.WidgetTracker({namespace:"zethus"});let c="",u="";const l=new m({name:b,fileTypes:["zethus"],defaultFor:["zethus"]},c,u),h=e=>{c=e.get("defaultROSEndpoint").composite,u=e.get("defaultROSPKGSEndpoint").composite,console.log(`Updating ROS Endpoint to --\x3e ${c}, ${u}`),l.defaultROSEndpoint=c,l.defaultROSPKGSEndpoint=u};return Promise.all([o.load("jupyterlab-zethus:plugin"),e.restored]).then((([e])=>{h(e),e.changed.connect(h)})).catch((e=>{console.error(e.message)})),e.contextMenu.addItem({command:"zethus:launch-simulation",selector:'.jp-DirListing-item[title$=".zethus"]',rank:1}),n.restore(r,{command:"docmanager:open",args:e=>({path:e.context.path,factory:b}),name:e=>e.context.path}),l.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{r.save(t)})),r.add(t)})),e.docRegistry.addWidgetFactory(l),e.docRegistry.addFileType({name:"zethus",displayName:"Zethus File",mimeTypes:["application/json"],extensions:[".zethus"],icon:p,fileFormat:"text"}),e.docRegistry.addFileType({name:"roslaunch",displayName:"ROS Launch File",mimeTypes:["application/xml"],extensions:[".launch"],icon:p,fileFormat:"text"}),s.addCommand("zethus:launch",{label:"Zethus",icon:p,caption:"Launch the Zethus viewer",execute:()=>{return e=t.defaultBrowser.model.path,s.execute("docmanager:new-untitled",{path:e,type:"file",ext:".zethus"}).then((e=>s.execute("docmanager:open",{path:e.path,factory:b})));var e},isEnabled:function(){return null!==r.currentWidget&&r.currentWidget===e.shell.currentWidget}}),a&&a.add({command:"zethus:launch",rank:1,category:"Robotics"}),d.Mode.getModeInfo().push({name:"ROS Launch",mime:"application/xml",mode:"xml",ext:["launch"]}),d.Mode.getModeInfo().push({name:"Zethus",mime:"application/json",mode:"json",ext:["zethus"]}),r},id:"jupyterlab-zethus:plugin",requires:[a.IFileBrowserFactory,o.ILayoutRestorer,r.ISettingRegistry],optional:[s.ILauncher],provides:w,autoStart:!0}},150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(645),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,":root {\n    --jp-image-jupyter: url('data:image/png;base64,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') !important;\n}\n\n.jp-iframe-zethus {\n    width: 100%;\n    height: 100%;\n    border: none;\n    /* zethus only works well with a white background right now */\n    background: #FFF;\n}",""]);const a=i},760:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(645),i=n.n(o),a=n(150),s=i()((function(e){return e[1]}));s.i(a.Z),s.push([e.id,"\n",""]);const r=s},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(i[s]=!0)}for(var r=0;r<e.length;r++){var c=[].concat(e[r]);o&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},379:(e,t,n)=>{"use strict";var o,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function r(e,t){for(var n={},o=[],i=0;i<e.length;i++){var r=e[i],c=t.base?r[0]+t.base:r[0],d=n[c]||0,u="".concat(c," ").concat(d);n[c]=d+1;var l=s(u),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==l?(a[l].references++,a[l].updater(h)):a.push({identifier:u,updater:g(h,t),references:1}),o.push(u)}return o}function c(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var a=n.nc;a&&(o.nonce=a)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function l(e,t,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var a=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function h(e,t,n){var o=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var p=null,f=0;function g(e,t){var n,o,i;if(t.singleton){var a=f++;n=p||(p=c(t)),o=l.bind(null,n,a,!1),i=l.bind(null,n,a,!0)}else n=c(t),o=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var i=s(n[o]);a[i].references--}for(var c=r(e,t),d=0;d<n.length;d++){var u=s(n[d]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=c}}}}}]);