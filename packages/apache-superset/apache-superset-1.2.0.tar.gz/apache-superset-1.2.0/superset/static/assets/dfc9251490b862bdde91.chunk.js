(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{149:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return o}));const n="YYYY-MM-DD HH:mm:ssZ",s="HH:mm:ss.SSS",r="True",i="False",c={standalone:"standalone",preselectFilters:"preselect_filters"},l=250,o=500},162:function(e,t,a){"use strict";var n=a(796);t.a=n.a},1863:function(e,t,a){"use strict";var n=a(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(2132)).default;t.default=s},1864:function(e,t,a){"use strict";var n=a(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(2133)).default;t.default=s},1865:function(e,t,a){"use strict";var n=a(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(2134)).default;t.default=s},2132:function(e,t){e.exports=function(e){const t={begin:"<",end:">",subLanguage:"xml",relevance:0},a={begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},n={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},s={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]};n.contains.push(s),s.contains.push(n);var r=[t,a];return n.contains=n.contains.concat(r),s.contains=s.contains.concat(r),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:r=r.concat(n,s)},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:r}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},n,s,{className:"quote",begin:"^>\\s+",contains:r,end:"$"},{className:"code",variants:[{begin:"(`{3,})(.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})(.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},a,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}}},2133:function(e,t){function a(...e){return e.map(e=>{return(t=e)?"string"==typeof t?t:t.source:null;var t}).join("")}e.exports=function(e){const t=function(e){const t={"builtin-name":["action","bindattr","collection","component","concat","debugger","each","each-in","get","hash","if","in","input","link-to","loc","log","lookup","mut","outlet","partial","query-params","render","template","textarea","unbound","unless","view","with","yield"].join(" ")},n={literal:["true","false","undefined","null"].join(" ")},s=/\[.*?\]/,r=/[^\s!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~]+/,i=a("(",/'.*?'/,"|",/".*?"/,"|",s,"|",r,"|",/\.|\//,")+"),c=a("(",s,"|",r,")(?==)"),l={begin:i,lexemes:/[\w.\/]+/},o=e.inherit(l,{keywords:n}),u={begin:/\(/,end:/\)/},d={className:"attr",begin:c,relevance:0,starts:{begin:/=/,end:/=/,starts:{contains:[e.NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,o,u]}}},b={contains:[e.NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:/as\s+\|/,keywords:{keyword:"as"},end:/\|/,contains:[{begin:/\w+/}]},d,o,u],returnEnd:!0},g=e.inherit(l,{className:"name",keywords:t,starts:e.inherit(b,{end:/\)/})});u.contains=[g];const m=e.inherit(l,{keywords:t,className:"name",starts:e.inherit(b,{end:/}}/})}),h=e.inherit(l,{keywords:t,className:"name"}),p=e.inherit(l,{className:"name",keywords:t,starts:e.inherit(b,{end:/}}/})});return{name:"Handlebars",aliases:["hbs","html.hbs","html.handlebars","htmlbars"],case_insensitive:!0,subLanguage:"xml",contains:[{begin:/\\\{\{/,skip:!0},{begin:/\\\\(?=\{\{)/,skip:!0},e.COMMENT(/\{\{!--/,/--\}\}/),e.COMMENT(/\{\{!/,/\}\}/),{className:"template-tag",begin:/\{\{\{\{(?!\/)/,end:/\}\}\}\}/,contains:[m],starts:{end:/\{\{\{\{\//,returnEnd:!0,subLanguage:"xml"}},{className:"template-tag",begin:/\{\{\{\{\//,end:/\}\}\}\}/,contains:[h]},{className:"template-tag",begin:/\{\{#/,end:/\}\}/,contains:[m]},{className:"template-tag",begin:/\{\{(?=else\}\})/,end:/\}\}/,keywords:"else"},{className:"template-tag",begin:/\{\{(?=else if)/,end:/\}\}/,keywords:"else if"},{className:"template-tag",begin:/\{\{\//,end:/\}\}/,contains:[h]},{className:"template-variable",begin:/\{\{\{/,end:/\}\}\}/,contains:[p]},{className:"template-variable",begin:/\{\{/,end:/\}\}/,contains:[p]}]}}(e);return t.name="HTMLbars",e.getLanguage("handlebars")&&(t.disableAutodetect=!0),t}},2134:function(e,t){e.exports=function(e){var t={literal:"true false null"},a=[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],n=[e.QUOTE_STRING_MODE,e.C_NUMBER_MODE],s={end:",",endsWithParent:!0,excludeEnd:!0,contains:n,keywords:t},r={begin:"{",end:"}",contains:[{className:"attr",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE],illegal:"\\n"},e.inherit(s,{begin:/:/})].concat(a),illegal:"\\S"},i={begin:"\\[",end:"\\]",contains:[e.inherit(s)],illegal:"\\S"};return n.push(r,i),a.forEach((function(e){n.push(e)})),{name:"JSON",contains:n,keywords:t,illegal:"\\S"}}},4541:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(14);const s={name:Object(n.e)("Data"),tabs:[{name:"Databases",label:Object(n.e)("Databases"),url:"/databaseview/list/",usesRouter:!0},{name:"Datasets",label:Object(n.e)("Datasets"),url:"/tablemodelview/list/",usesRouter:!0},{name:"Saved queries",label:Object(n.e)("Saved queries"),url:"/savedqueryview/list/",usesRouter:!0},{name:"Query history",label:Object(n.e)("Query history"),url:"/superset/sqllab/history/",usesRouter:!0}]}},4624:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a(26),s=a.n(n),r=(a(0),a(47)),i=a(14),c=a(823),l=a.n(c),o=a(1864),u=a.n(o),d=a(1863),b=a.n(d),g=a(1865),m=a.n(g),h=a(727),p=a.n(h),O=a(411),j=a.n(O),f=a(48),y=a(276),v=a(1);j.a.registerLanguage("sql",l.a),j.a.registerLanguage("markdown",b.a),j.a.registerLanguage("html",u.a),j.a.registerLanguage("json",m.a);const _=r.j.div`
  margin-top: -24px;
  &:hover {
    svg {
      visibility: visible;
    }
  }
  svg {
    position: relative;
    top: 40px;
    left: 512px;
    visibility: hidden;
    margin: -4px;
  }
`;function x({addDangerToast:e,addSuccessToast:t,children:a,...n}){return Object(v.h)(_,null,Object(v.h)(f.a,{tabIndex:0,name:"copy",role:"button",onClick:n=>{var s;n.preventDefault(),n.currentTarget.blur(),s=a,Object(y.a)(s).then(()=>{e&&e(Object(i.e)("Sorry, your browser does not support copying."))}).catch(()=>{t&&t(Object(i.e)("SQL Copied!"))})}}),Object(v.h)(j.a,s()({style:p.a},n),a))}},4625:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(40);var n=a(432),s=a.n(n),r=a(0);function i({queries:e,fetchData:t,currentQueryId:a}){const n=s()(e).call(e,e=>e.id===a),[i,c]=Object(r.useState)(n),[l,o]=Object(r.useState)(!1),[u,d]=Object(r.useState)(!1);function b(){o(0===i),d(i===e.length-1)}function g(a){const n=i+(a?-1:1);n>=0&&n<e.length&&(t(e[n].id),c(n),b())}return Object(r.useEffect)(()=>{b()}),{handleKeyPress:function(t){i>=0&&i<e.length&&("ArrowDown"===t.key||"k"===t.key?(t.preventDefault(),g(!1)):"ArrowUp"!==t.key&&"j"!==t.key||(t.preventDefault(),g(!0)))},handleDataChange:g,disablePrevious:l,disableNext:u}}},4920:function(e,t,a){"use strict";a.r(t);a(40);var n,s=a(11),r=a.n(s),i=a(0),c=a.n(i),l=a(47),o=a(14),u=a(91),d=a(38),b=a.n(d),g=a(125),m=a(129),h=a(445),p=a(1e3),O=a(162),j=a(4541),f=a(4526),y=a(48),v=a(50),_=a(411),x=a.n(_),w=a(823),q=a.n(w),S=a(727),k=a.n(S),N=a(149);!function(e){e.id="id",e.changed_on="changed_on",e.database="database",e.database_name="database.database_name",e.schema="schema",e.sql="sql",e.executed_sql="exceuted_sql",e.sql_tables="sql_tables",e.status="status",e.tab_name="tab_name",e.user="user",e.user_first_name="user.first_name",e.start_time="start_time",e.end_time="end_time",e.rows="rows",e.tmp_table_name="tmp_table_name",e.tracking_url="tracking_url"}(n||(n={}));var D=a(101),$=a(5),E=a.n($),M=a(44),C=a(4624),T=a(4625),L=a(1);const H=l.j.div`
  color: ${({theme:e})=>e.colors.secondary.light2};
  font-size: ${({theme:e})=>e.typography.sizes.s-1}px;
  margin-bottom: 0;
  text-transform: uppercase;
`,z=l.j.div`
  color: ${({theme:e})=>e.colors.grayscale.dark2};
  font-size: ${({theme:e})=>e.typography.sizes.m-1}px;
  padding: 4px 0 24px 0;
`,U=l.j.div`
  margin: 0 0 ${({theme:e})=>6*e.gridUnit}px 0;
`,A=l.j.div`
  display: inline;
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  padding: ${({theme:e})=>2*e.gridUnit}px
    ${({theme:e})=>4*e.gridUnit}px;
  margin-right: ${({theme:e})=>4*e.gridUnit}px;
  color: ${({theme:e})=>e.colors.secondary.dark1};

  &.active,
  &:focus,
  &:hover {
    background: ${({theme:e})=>e.colors.secondary.light4};
    border-bottom: none;
    border-radius: ${({theme:e})=>e.borderRadius}px;
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  }

  &:hover:not(.active) {
    background: ${({theme:e})=>e.colors.secondary.light5};
  }
`,B=Object(l.j)(D.b)`
  .ant-modal-body {
    padding: ${({theme:e})=>6*e.gridUnit}px;
  }

  pre {
    font-size: ${({theme:e})=>e.typography.sizes.xs}px;
    font-weight: ${({theme:e})=>e.typography.weights.normal};
    line-height: ${({theme:e})=>e.typography.sizes.l}px;
    height: 375px;
    border: none;
  }
`;var R=Object(m.a)((function({onHide:e,openInSqlLab:t,queries:a,query:n,fetchData:s,show:r,addDangerToast:c,addSuccessToast:l}){const{handleKeyPress:u,handleDataChange:d,disablePrevious:b,disableNext:g}=Object(T.a)({queries:a,currentQueryId:n.id,fetchData:s}),[m,h]=Object(i.useState)("user"),{id:p,sql:O,executed_sql:j}=n;return Object(L.h)("div",{role:"none",onKeyUp:u},Object(L.h)(B,{onHide:e,show:r,title:Object(o.e)("Query preview"),footer:[Object(L.h)(M.a,{key:"previous-query",disabled:b,onClick:()=>d(!0)},Object(o.e)("Previous")),Object(L.h)(M.a,{key:"next-query",disabled:g,onClick:()=>d(!1)},Object(o.e)("Next")),Object(L.h)(M.a,{key:"open-in-sql-lab",buttonStyle:"primary",onClick:()=>t(p)},Object(o.e)("Open in SQL Lab"))]},Object(L.h)(H,null,Object(o.e)("Tab name")),Object(L.h)(z,null,n.tab_name),Object(L.h)(U,null,Object(L.h)(A,{role:"button",className:E()({active:"user"===m}),onClick:()=>h("user")},Object(o.e)("User query")),Object(L.h)(A,{role:"button",className:E()({active:"executed"===m}),onClick:()=>h("executed")},Object(o.e)("Executed query"))),Object(L.h)(C.a,{addDangerToast:c,addSuccessToast:l,language:"sql"},("user"===m?O:j)||"")))}));const I=Object(l.j)(f.b)`
  table .table-cell {
    vertical-align: top;
  }
`;x.a.registerLanguage("sql",q.a);const Q=Object(l.j)(x.a)`
  height: ${({theme:e})=>26*e.gridUnit}px;
  overflow: hidden !important; /* needed to override inline styles */
  text-overflow: ellipsis;
  white-space: nowrap;
`,P=l.j.div`
  .count {
    margin-left: 5px;
    color: ${({theme:e})=>e.colors.primary.base};
    text-decoration: underline;
    cursor: pointer;
  }
`,F=l.j.div`
  color: ${({theme:e})=>e.colors.grayscale.dark2};
`,G=Object(l.j)(y.a,{shouldForwardProp:e=>"status"!==e})`
  color: ${({status:e,theme:t})=>"success"===e?t.colors.success.base:"failed"===e?t.colors.error.base:"running"===e?t.colors.primary.base:"offline"===e?t.colors.grayscale.light1:t.colors.grayscale.base};
`;t.default=Object(m.a)((function({addDangerToast:e,addSuccessToast:t}){const{state:{loading:a,resourceCount:s,resourceCollection:l},fetchData:d}=Object(h.f)("query",Object(o.e)("Query history"),e,!1),[m,_]=Object(i.useState)(),x=Object(i.useCallback)(t=>{u.a.get({endpoint:`/api/v1/query/${t}`}).then(({json:e={}})=>{_({...e.result})},Object(g.c)(t=>e(Object(o.e)("There was an issue previewing the selected query. %s",t))))},[e]),w={activeChild:"Query history",...j.a},q=[{id:n.start_time,desc:!0}],S=Object(i.useMemo)(()=>[{Cell:({row:{original:{status:e}}})=>{const t={name:"",label:"",status:""};return"success"===e&&(t.name="check",t.label=Object(o.e)("Success"),t.status="success"),"failed"!==e&&"stopped"!==e||(t.name="x-small",t.label=Object(o.e)("Failed"),t.status="failed"),"running"===e&&(t.name="running",t.label=Object(o.e)("Running"),t.status="running"),"timed_out"===e&&(t.name="offline",t.label=Object(o.e)("Offline"),t.status="offline"),"scheduled"!==e&&"pending"!==e||(t.name="queued",t.label=Object(o.e)("Scheduled"),t.status="queued"),Object(L.h)(v.a,{title:t.label,placement:"bottom"},Object(L.h)("span",null,Object(L.h)(G,{name:t.name,status:t.status})))},accessor:n.status,size:"xs",disableSortBy:!0},{accessor:n.start_time,Header:Object(o.e)("Time"),size:"xl",Cell:({row:{original:{start_time:e,end_time:t}}})=>{const a=b.a.utc(e).local().format(N.c).split(" "),n=Object(L.h)(c.a.Fragment,null,a[0]," ",Object(L.h)("br",null),a[1]);return t?Object(L.h)(v.a,{title:Object(o.e)("Duration: %s",b()(b.a.utc(t-e)).format(N.f)),placement:"bottom"},Object(L.h)("span",null,n)):n}},{accessor:n.tab_name,Header:Object(o.e)("Tab name"),size:"xl"},{accessor:n.database_name,Header:Object(o.e)("Database"),size:"xl"},{accessor:n.database,hidden:!0},{accessor:n.schema,Header:Object(o.e)("Schema"),size:"xl"},{Cell:({row:{original:{sql_tables:e=[]}}})=>{const t=r()(e).call(e,e=>e.table),a=t.length>0?t.shift():"";return t.length?Object(L.h)(P,null,Object(L.h)("span",null,a),Object(L.h)(O.a,{placement:"right",title:Object(o.e)("TABLES"),trigger:"click",content:Object(L.h)(c.a.Fragment,null,r()(t).call(t,e=>Object(L.h)(F,{key:e},e)))},Object(L.h)("span",{className:"count"},"(+",t.length,")"))):a},accessor:n.sql_tables,Header:Object(o.e)("Tables"),size:"xl",disableSortBy:!0},{accessor:n.user_first_name,Header:Object(o.e)("User"),size:"xl",Cell:({row:{original:{user:e}}})=>e?`${e.first_name} ${e.last_name}`:""},{accessor:n.user,hidden:!0},{accessor:n.rows,Header:Object(o.e)("Rows"),size:"md"},{accessor:n.sql,Header:Object(o.e)("SQL"),Cell:({row:{original:e,id:t}})=>Object(L.h)("div",{tabIndex:0,role:"button",onClick:()=>_(e)},Object(L.h)(Q,{language:"sql",style:k.a},Object(g.o)(e.sql,4)))},{Header:Object(o.e)("Actions"),id:"actions",disableSortBy:!0,Cell:({row:{original:{id:e}}})=>Object(L.h)(v.a,{title:Object(o.e)("Open query in SQL Lab"),placement:"bottom"},Object(L.h)("a",{href:`/superset/sqllab?queryId=${e}`},Object(L.h)(y.a,{name:"full"})))}],[]),D=Object(i.useMemo)(()=>[{Header:Object(o.e)("Database"),id:"database",input:"select",operator:f.a.relationOneMany,unfilteredLabel:"All",fetchSelects:Object(g.e)("query","database",Object(g.c)(t=>e(Object(o.e)("An error occurred while fetching database values: %s",t)))),paginate:!0},{Header:Object(o.e)("State"),id:"status",input:"select",operator:f.a.equals,unfilteredLabel:"All",fetchSelects:Object(g.d)("query","status",Object(g.c)(t=>e(Object(o.e)("An error occurred while fetching schema values: %s",t)))),paginate:!0},{Header:Object(o.e)("User"),id:"user",input:"select",operator:f.a.relationOneMany,unfilteredLabel:"All",fetchSelects:Object(g.e)("query","user",Object(g.c)(t=>e(Object(o.e)("An error occurred while fetching database values: %s",t)))),paginate:!0},{Header:Object(o.e)("Time range"),id:"start_time",input:"datetime_range",operator:f.a.between},{Header:Object(o.e)("Search by query text"),id:"sql",input:"search",operator:f.a.contains}],[e]);return Object(L.h)(c.a.Fragment,null,Object(L.h)(p.a,w),m&&Object(L.h)(R,{onHide:()=>_(void 0),query:m,queries:l,fetchData:x,openInSqlLab:e=>window.location.assign(`/superset/sqllab?queryId=${e}`),show:!0}),Object(L.h)(I,{className:"query-history-list-view",columns:S,count:s,data:l,fetchData:d,filters:D,initialSort:q,loading:a,pageSize:25,highlightRowId:null==m?void 0:m.id}))}))}}]);