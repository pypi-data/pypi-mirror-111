(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{4619:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PivotData=e.flatKey=e.sortAs=e.getSort=e.numberFormat=e.naturalSort=e.locales=e.derivers=e.aggregators=e.aggregatorTemplates=void 0;var a,n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=r(2),i=(a=l)&&a.__esModule?a:{default:a};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var c,f=function(t){var e=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},t);return function(t){if(isNaN(t)||!isFinite(t))return"";var r=function(t,e,r){for(var a=String(t).split("."),n=a[0],o=a.length>1?r+a[1]:"",l=/(\d+)(\d{3})/;l.test(n);)n=n.replace(l,"$1"+e+"$2");return n+o}((e.scaler*t).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep);return""+e.prefix+r+e.suffix}},p=/(\d+)|(\D+)/g,h=/\d/,d=/^0/,v=function(t,e){if(null!==e&&null===t)return-1;if(null!==t&&null===e)return 1;if("number"==typeof t&&isNaN(t))return-1;if("number"==typeof e&&isNaN(e))return 1;var r=Number(t),a=Number(e);if(r<a)return-1;if(r>a)return 1;if("number"==typeof t&&"number"!=typeof e)return-1;if("number"==typeof e&&"number"!=typeof t)return 1;if("number"==typeof t&&"number"==typeof e)return 0;if(isNaN(a)&&!isNaN(r))return-1;if(isNaN(r)&&!isNaN(a))return 1;var n=String(t),o=String(e);if(n===o)return 0;if(!h.test(n)||!h.test(o))return n>o?1:-1;for(n=n.match(p),o=o.match(p);n.length&&o.length;){var l=n.shift(),i=o.shift();if(l!==i)return h.test(l)&&h.test(i)?l.replace(d,".0")-i.replace(d,".0"):l>i?1:-1}return n.length-o.length},g=function(t,e){if(t)if("function"==typeof t){var r=t(e);if("function"==typeof r)return r}else if(e in t)return t[e];return v},y=f(),m=f({digitsAfterDecimal:0}),b=f({digitsAfterDecimal:1,scaler:100,suffix:"%"}),w={count:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return function(){return function(){return{count:0,push:function(){this.count++},value:function(){return this.count},format:t}}}},uniques:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return function(r){var a=o(r,1)[0];return function(){return{uniq:[],push:function(t){Array.from(this.uniq).includes(t[a])||this.uniq.push(t[a])},value:function(){return t(this.uniq)},format:e,numInputs:void 0!==a?0:1}}}},sum:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return function(e){var r=o(e,1)[0];return function(){return{sum:0,push:function(t){isNaN(parseFloat(t[r]))||(this.sum+=parseFloat(t[r]))},value:function(){return this.sum},format:t,numInputs:void 0!==r?0:1}}}},extremes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return function(r){var a=o(r,1)[0];return function(r){return{val:null,sorter:g(void 0!==r?r.sorters:null,a),push:function(e){var r=e[a];["min","max"].includes(t)&&(r=parseFloat(r),isNaN(r)||(this.val=Math[t](r,null!==this.val?this.val:r))),"first"===t&&this.sorter(r,null!==this.val?this.val:r)<=0&&(this.val=r),"last"===t&&this.sorter(r,null!==this.val?this.val:r)>=0&&(this.val=r)},value:function(){return this.val},format:function(t){return isNaN(t)?t:e(t)},numInputs:void 0!==a?0:1}}}},quantile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return function(r){var a=o(r,1)[0];return function(){return{vals:[],push:function(t){var e=parseFloat(t[a]);isNaN(e)||this.vals.push(e)},value:function(){if(0===this.vals.length)return null;this.vals.sort((function(t,e){return t-e}));var e=(this.vals.length-1)*t;return(this.vals[Math.floor(e)]+this.vals[Math.ceil(e)])/2},format:e,numInputs:void 0!==a?0:1}}}},runningStat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mean",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return function(a){var n=o(a,1)[0];return function(){return{n:0,m:0,s:0,push:function(t){var e=parseFloat(t[n]);if(!isNaN(e)){this.n+=1,1===this.n&&(this.m=e);var r=this.m+(e-this.m)/this.n;this.s=this.s+(e-this.m)*(e-r),this.m=r}},value:function(){if("mean"===t)return 0===this.n?NaN:this.m;if(this.n<=e)return 0;switch(t){case"var":return this.s/(this.n-e);case"stdev":return Math.sqrt(this.s/(this.n-e));default:throw new Error("unknown mode for runningStat")}},format:r,numInputs:void 0!==n?0:1}}}},sumOverSum:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return function(e){var r=o(e,2),a=r[0],n=r[1];return function(){return{sumNum:0,sumDenom:0,push:function(t){isNaN(parseFloat(t[a]))||(this.sumNum+=parseFloat(t[a])),isNaN(parseFloat(t[n]))||(this.sumDenom+=parseFloat(t[n]))},value:function(){return this.sumNum/this.sumDenom},format:t,numInputs:void 0!==a&&void 0!==n?0:2}}}},fractionOf:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"total",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return function(){for(var a=arguments.length,n=Array(a),o=0;o<a;o++)n[o]=arguments[o];return function(a,o,l){return{selector:{total:[[],[]],row:[o,[]],col:[[],l]}[e],inner:t.apply(void 0,u(Array.from(n||[])))(a,o,l),push:function(t){this.inner.push(t)},format:r,value:function(){return this.inner.value()/a.getAggregator.apply(a,u(Array.from(this.selector||[]))).inner.value()},numInputs:t.apply(void 0,u(Array.from(n||[])))().numInputs}}}},countUnique:function(t){return w.uniques((function(t){return t.length}),t)},listUnique:function(t){return w.uniques((function(e){return e.join(t)}),(function(t){return t}))},max:function(t){return w.extremes("max",t)},min:function(t){return w.extremes("min",t)},first:function(t){return w.extremes("first",t)},last:function(t){return w.extremes("last",t)},median:function(t){return w.quantile(.5,t)},average:function(t){return w.runningStat("mean",1,t)},var:function(t,e){return w.runningStat("var",t,e)},stdev:function(t,e){return w.runningStat("stdev",t,e)}},k={Count:(c=w).count(m),"Count Unique Values":c.countUnique(m),"List Unique Values":c.listUnique(", "),Sum:c.sum(y),"Integer Sum":c.sum(m),Average:c.average(y),Median:c.median(y),"Sample Variance":c.var(1,y),"Sample Standard Deviation":c.stdev(1,y),Minimum:c.min(y),Maximum:c.max(y),First:c.first(y),Last:c.last(y),"Sum over Sum":c.sumOverSum(y),"Sum as Fraction of Total":c.fractionOf(c.sum(),"total",b),"Sum as Fraction of Rows":c.fractionOf(c.sum(),"row",b),"Sum as Fraction of Columns":c.fractionOf(c.sum(),"col",b),"Count as Fraction of Total":c.fractionOf(c.count(),"total",b),"Count as Fraction of Rows":c.fractionOf(c.count(),"row",b),"Count as Fraction of Columns":c.fractionOf(c.count(),"col",b)},O={en:{aggregators:k,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",apply:"Apply",cancel:"Cancel",totals:"Totals",vs:"vs",by:"by"}}},S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],T=function(t){return("0"+t).substr(-2,2)},A={bin:function(t,e){return function(r){return r[t]-r[t]%e}},dateFormat:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C,o=r?"UTC":"";return function(r){var l=new Date(Date.parse(r[t]));return isNaN(l)?"":e.replace(/%(.)/g,(function(t,e){switch(e){case"y":return l["get"+o+"FullYear"]();case"m":return T(l["get"+o+"Month"]()+1);case"n":return a[l["get"+o+"Month"]()];case"d":return T(l["get"+o+"Date"]());case"w":return n[l["get"+o+"Day"]()];case"x":return l["get"+o+"Day"]();case"H":return T(l["get"+o+"Hours"]());case"M":return T(l["get"+o+"Minutes"]());case"S":return T(l["get"+o+"Seconds"]());default:return"%"+e}}))}}},_=function(t){return t.join(String.fromCharCode(0))},N=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.props=Object.assign({},t.defaultProps,r),i.default.checkPropTypes(t.propTypes,this.props,"prop","PivotData"),this.aggregator=this.props.aggregators[this.props.aggregatorName](this.props.vals),this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(this,[],[]),this.subtotals=a,this.sorted=!1,t.forEachRecord(this.props.data,this.props.derivedAttributes,(function(t){e.filter(t)&&e.processRecord(t)}))}return n(t,[{key:"filter",value:function(t){for(var e in this.props.valueFilter)if(t[e]in this.props.valueFilter[e])return!1;return!0}},{key:"forEachMatchingRecord",value:function(e,r){var a=this;return t.forEachRecord(this.props.data,this.props.derivedAttributes,(function(t){if(a.filter(t)){for(var n in e){if(e[n]!==(n in t?t[n]:"null"))return}r(t)}}))}},{key:"arrSort",value:function(t,e){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map((function(t){return g(r.props.sorters,t)}));return function(t,r){for(var o=Math.min(t.length,r.length),l=0;l<o;l++){var i=n[l],s=a?i(r[l],t[l]):i(t[l],r[l]);if(0!==s)return s}return e?t.length-r.length:r.length-t.length}}},{key:"sortKeys",value:function(){var t=this;if(!this.sorted){this.sorted=!0;var e=function(e,r){return t.getAggregator(e,r).value()};switch(this.props.rowOrder){case"key_z_to_a":this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop,!0));break;case"value_a_to_z":this.rowKeys.sort((function(t,r){return v(e(t,[]),e(r,[]))}));break;case"value_z_to_a":this.rowKeys.sort((function(t,r){return-v(e(t,[]),e(r,[]))}));break;default:this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop))}switch(this.props.colOrder){case"key_z_to_a":this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop,!0));break;case"value_a_to_z":this.colKeys.sort((function(t,r){return v(e([],t),e([],r))}));break;case"value_z_to_a":this.colKeys.sort((function(t,r){return-v(e([],t),e([],r))}));break;default:this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop))}}}},{key:"getColKeys",value:function(){return this.sortKeys(),this.colKeys}},{key:"getRowKeys",value:function(){return this.sortKeys(),this.rowKeys}},{key:"processRecord",value:function(t){var e=[],r=[],a=!0,n=!1,o=void 0;try{for(var l,i=this.props.cols[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;e.push(s in t?t[s]:"null")}}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}var u=!0,c=!1,f=void 0;try{for(var p,h=this.props.rows[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var d=p.value;r.push(d in t?t[d]:"null")}}catch(t){c=!0,f=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw f}}this.allTotal.push(t);for(var v=this.subtotals.rowEnabled?1:Math.max(1,r.length),g=this.subtotals.colEnabled?1:Math.max(1,e.length),y=v;y<=r.length;y++){var m=r.slice(0,y),b=_(m);this.rowTotals[b]||(this.rowKeys.push(m),this.rowTotals[b]=this.aggregator(this,m,[])),this.rowTotals[b].push(t)}for(var w=g;w<=e.length;w++){var k=e.slice(0,w),O=_(k);this.colTotals[O]||(this.colKeys.push(k),this.colTotals[O]=this.aggregator(this,[],k)),this.colTotals[O].push(t)}for(var S=v;S<=r.length;S++){var C=r.slice(0,S),T=_(C);this.tree[T]||(this.tree[T]={});for(var A=g;A<=e.length;A++){var N=e.slice(0,A),j=_(N);this.tree[T][j]||(this.tree[T][j]=this.aggregator(this,C,N)),this.tree[T][j].push(t)}}}},{key:"getAggregator",value:function(t,e){var r=_(t),a=_(e);return(0===t.length&&0===e.length?this.allTotal:0===t.length?this.colTotals[a]:0===e.length?this.rowTotals[r]:this.tree[r][a])||{value:function(){return null},format:function(){return""}}}}]),t}();N.forEachRecord=function(t,e,r){var a=void 0,n=void 0;if(a=0===Object.getOwnPropertyNames(e).length?r:function(t){for(var a in e){var n=e[a](t);null!==n&&(t[a]=n)}return r(t)},"function"==typeof t)return t(a);if(Array.isArray(t))return Array.isArray(t[0])?function(){var e=[],r=!0,o=!1,l=void 0;try{for(var i,s=Object.keys(t||{})[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value,c=t[u];if(u>0){n={};var f=!0,p=!1,h=void 0;try{for(var d,v=Object.keys(t[0]||{})[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var g=d.value,y=t[0][g];n[y]=c[g]}}catch(t){p=!0,h=t}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}e.push(a(n))}}}catch(t){o=!0,l=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw l}}return e}():function(){var e=[],r=!0,o=!1,l=void 0;try{for(var i,s=Array.from(t)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)n=i.value,e.push(a(n))}catch(t){o=!0,l=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw l}}return e}();throw new Error("unknown input format")},N.defaultProps={aggregators:k,cols:[],rows:[],vals:[],aggregatorName:"Count",sorters:{},valueFilter:{},rowOrder:"key_a_to_z",colOrder:"key_a_to_z",derivedAttributes:{}},N.propTypes={data:i.default.oneOfType([i.default.array,i.default.object,i.default.func]).isRequired,aggregatorName:i.default.string,cols:i.default.arrayOf(i.default.string),rows:i.default.arrayOf(i.default.string),vals:i.default.arrayOf(i.default.string),valueFilter:i.default.objectOf(i.default.objectOf(i.default.bool)),sorters:i.default.oneOfType([i.default.func,i.default.objectOf(i.default.func)]),derivedAttributes:i.default.objectOf(i.default.func),rowOrder:i.default.oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"]),colOrder:i.default.oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"])},e.aggregatorTemplates=w,e.aggregators=k,e.derivers=A,e.locales=O,e.naturalSort=v,e.numberFormat=f,e.getSort=g,e.sortAs=function(t){var e={},r={};for(var a in t){var n=t[a];e[n]=a,"string"==typeof n&&(r[n.toLowerCase()]=a)}return function(t,a){return t in e&&a in e?e[t]-e[a]:t in e?-1:a in e?1:t in r&&a in r?r[t]-r[a]:t in r?-1:a in r?1:v(t,a)}},e.flatKey=_,e.PivotData=N},4817:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=s(r(0)),o=s(r(2)),l=r(4619),i=s(r(4818));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var f=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"render",value:function(){var t=this.props.renderers[this.props.rendererName in this.props.renderers?this.props.rendererName:Object.keys(this.props.renderers)[0]];return n.default.createElement(t,this.props)}}]),e}(n.default.PureComponent);f.propTypes=Object.assign({},l.PivotData.propTypes,{rendererName:o.default.string,renderers:o.default.objectOf(o.default.func)}),f.defaultProps=Object.assign({},l.PivotData.defaultProps,{rendererName:"Table",renderers:i.default}),e.default=f,t.exports=e.default},4818:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=s(r(0)),l=s(r(2)),i=r(4619);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t){var e=Math.min.apply(Math,t),r=Math.max.apply(Math,t);return function(t){var a=255-Math.round(255*(t-e)/(r-e));return{backgroundColor:"rgb(255,"+a+","+a+")"}}}function v(t,e,r,a){return t?o.default.createElement("span",{className:"toggle-wrapper"},o.default.createElement("span",{className:"toggle",onClick:r},e),o.default.createElement("span",{className:"toggle-val"},a)):a}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(e){function r(t){f(this,r);var e=p(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return e.state={collapsedRows:{},collapsedCols:{}},e.clickHeaderHandler=e.clickHeaderHandler.bind(e),e.clickHandler=e.clickHandler.bind(e),e}return h(r,e),n(r,[{key:"getBasePivotSettings",value:function(){var e=this.props,a=e.cols,n=e.rows,o=Object.assign({rowTotals:!0,colTotals:!0},e.tableOptions),l=o.rowTotals||0===a.length,s=o.colTotals||0===n.length,u=Object.assign({arrowCollapsed:"▲",arrowExpanded:"▼"},e.subtotalOptions),c=Object.assign({displayOnTop:!1,enabled:l,hideOnExpand:!1},u.colSubtotalDisplay),f=Object.assign({displayOnTop:!1,enabled:s,hideOnExpand:!1},u.rowSubtotalDisplay),p=new i.PivotData(e,t.subtotals?{rowEnabled:f.enabled,colEnabled:c.enabled,rowPartialOnTop:f.displayOnTop,colPartialOnTop:c.displayOnTop}:{}),h=p.getRowKeys(),d=p.getColKeys(),v={},g={},y={},m=null;if(o.clickCallback){var b=!0,w=!1,k=void 0;try{for(var O,S=h[Symbol.iterator]();!(b=(O=S.next()).done);b=!0){var C=O.value,T=(0,i.flatKey)(C);T in v||(v[T]={});var A=!0,_=!1,N=void 0;try{for(var j,K=d[Symbol.iterator]();!(A=(j=K.next()).done);A=!0){var x=j.value;v[T][(0,i.flatKey)(x)]=this.clickHandler(p,C,x)}}catch(t){_=!0,N=t}finally{try{!A&&K.return&&K.return()}finally{if(_)throw N}}}}catch(t){w=!0,k=t}finally{try{!b&&S.return&&S.return()}finally{if(w)throw k}}if(l){var P=!0,E=!1,H=void 0;try{for(var R,M=h[Symbol.iterator]();!(P=(R=M.next()).done);P=!0){var D=R.value;g[(0,i.flatKey)(D)]=this.clickHandler(p,D,[])}}catch(t){E=!0,H=t}finally{try{!P&&M.return&&M.return()}finally{if(E)throw H}}}if(s){var F=!0,q=!1,z=void 0;try{for(var L,U=d[Symbol.iterator]();!(F=(L=U.next()).done);F=!0){var V=L.value;y[(0,i.flatKey)(V)]=this.clickHandler(p,[],V)}}catch(t){q=!0,z=t}finally{try{!F&&U.return&&U.return()}finally{if(q)throw z}}}l&&s&&(m=this.clickHandler(p,[],[]))}return Object.assign({pivotData:p,colAttrs:a,rowAttrs:n,colKeys:d,rowKeys:h,rowTotals:l,colTotals:s,arrowCollapsed:u.arrowCollapsed,arrowExpanded:u.arrowExpanded,colSubtotalDisplay:c,rowSubtotalDisplay:f,cellCallbacks:v,rowTotalCallbacks:g,colTotalCallbacks:y,grandTotalCallback:m},r.heatmapMappers(p,e.tableColorScaleGenerator,s,l))}},{key:"clickHandler",value:function(t,e,r){for(var a=this,n=this.props.cols,o=this.props.rows,l=t.getAggregator(e,r).value(),i={},s=Math.min(n.length,r.length),u=0;u<s;u++){var c=n[u];null!==r[u]&&(i[c]=r[u])}for(var f=Math.min(o.length,e.length),p=0;p<f;p++){var h=o[p];null!==e[p]&&(i[h]=e[p])}return function(e){return a.props.tableOptions.clickCallback(e,l,i,t)}}},{key:"clickHeaderHandler",value:function(t,e,r,a,n){for(var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i={},s=0;s<=a;s++){var u=r[s];i[u]=e[s]}return function(r){return n(r,e[a],i,t,o,l)}}},{key:"collapseAttr",value:function(t,e,r){var a=this;return function(n){n.stopPropagation();var o=e+1,l=r.filter((function(t){return t.length===o})).map(i.flatKey),s={};l.forEach((function(t){s[t]=!0})),t?a.setState((function(t){return{collapsedRows:Object.assign({},t.collapsedRows,s)}})):a.setState((function(t){return{collapsedCols:Object.assign({},t.collapsedCols,s)}}))}}},{key:"expandAttr",value:function(t,e,r){var a=this;return function(n){n.stopPropagation();var o={};r.forEach((function(t){for(var r=0;r<=e;r++)o[(0,i.flatKey)(t.slice(0,r+1))]=!1})),t?a.setState((function(t){return{collapsedRows:Object.assign({},t.collapsedRows,o)}})):a.setState((function(t){return{collapsedCols:Object.assign({},t.collapsedCols,o)}}))}}},{key:"toggleRowKey",value:function(t){var e=this;return function(r){r.stopPropagation(),e.setState((function(e){return{collapsedRows:Object.assign({},e.collapsedRows,c({},t,!e.collapsedRows[t]))}}))}}},{key:"toggleColKey",value:function(t){var e=this;return function(r){r.stopPropagation(),e.setState((function(e){return{collapsedCols:Object.assign({},e.collapsedCols,c({},t,!e.collapsedCols[t]))}}))}}},{key:"calcAttrSpans",value:function(t,e){for(var r=[],a=Array(e).map((function(){return 0})),n=Array(e).map((function(){return null})),o=0;o<t.length;o++){for(var l=t[o],i=[],s=0,u=Math.min(n.length,l.length);s<u&&n[s]===l[s];)i.push(-1),r[a[s]][s]++,s++;for(;s<l.length;)a[s]=o,i.push(1),s++;r.push(i),n=l}return r}},{key:"renderColHeaderRow",value:function(e,r,a){var n=a.rowAttrs,l=a.colAttrs,s=a.colKeys,u=a.visibleColKeys,c=a.colAttrSpans,f=a.rowTotals,p=a.arrowExpanded,h=a.arrowCollapsed,d=a.colSubtotalDisplay,g=a.maxColVisible,y=a.pivotData,m=0===r&&0!==n.length?o.default.createElement("th",{key:"padding",colSpan:n.length,rowSpan:l.length}):null,b=t.subtotals&&d.enabled&&r!==l.length-1,w=null,k=null;b&&(w=r+1<g?this.collapseAttr(!1,r,s):this.expandAttr(!1,r,s),k=(r+1<g?p:h)+" ");for(var O=o.default.createElement("th",{key:"label",className:"pvtAxisLabel",onClick:this.clickHeaderHandler(y,l,this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback)},v(b,k,w,e)),S=[],C=0!==n.length?1:0,T=0;T<u.length;){var A=u[T],_=r<A.length?c[T][r]:1,N=_>1?"pvtColLabel":"pvtColLabel label-centered";if(r<A.length){var j=1+(r===l.length-1?C:0),K=(0,i.flatKey)(A.slice(0,r+1)),x=b?this.toggleColKey(K):null;S.push(o.default.createElement("th",{className:N,key:"colKey-"+K,colSpan:_,rowSpan:j,onClick:this.clickHeaderHandler(y,A,this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback)},v(b,(this.state.collapsedCols[K]?h:p)+" ",x,A[r])))}else if(r===A.length){var P=l.length-A.length+C;S.push(o.default.createElement("th",{className:N,key:"colKeyBuffer-"+(0,i.flatKey)(A),colSpan:_,rowSpan:P,onClick:this.clickHeaderHandler(y,A,this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback,!0)},"Totals"))}T+=_}var E=0===r&&f?o.default.createElement("th",{key:"total",className:"pvtTotalLabel",rowSpan:l.length+Math.min(n.length,1),onClick:this.clickHeaderHandler(y,[],this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback,!1,!0)},"Totals"):null,H=[m,O].concat(S,[E]);return o.default.createElement("tr",{key:"colAttr-"+r},H)}},{key:"renderRowHeaderRow",value:function(e){var r=this,a=e.rowAttrs,n=e.colAttrs,l=e.rowKeys,i=e.arrowCollapsed,s=e.arrowExpanded,u=e.rowSubtotalDisplay,c=e.maxRowVisible,f=e.pivotData;return o.default.createElement("tr",{key:"rowHdr"},a.map((function(e,n){var p=t.subtotals&&u.enabled&&n!==a.length-1,h=null,d=null;return p&&(h=n+1<c?r.collapseAttr(!0,n,l):r.expandAttr(!0,n,l),d=(n+1<c?s:i)+" "),o.default.createElement("th",{className:"pvtAxisLabel",key:"rowAttr-"+n,onClick:r.clickHeaderHandler(f,a,r.props.rows,n,r.props.tableOptions.clickRowHeaderCallback)},v(p,d,h,e))})),o.default.createElement("th",{className:"pvtTotalLabel",key:"padding",onClick:this.clickHeaderHandler(f,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},0===n.length?"Totals":null))}},{key:"renderTableRow",value:function(e,r,a){var n=this,l=a.rowAttrs,s=a.colAttrs,c=a.rowAttrSpans,f=a.visibleColKeys,p=a.pivotData,h=a.rowTotals,d=a.rowSubtotalDisplay,g=a.valueCellColors,y=a.rowTotalColors,m=a.arrowExpanded,b=a.arrowCollapsed,w=a.cellCallbacks,k=a.rowTotalCallbacks,O=(0,i.flatKey)(e),S=0!==s.length?1:0,C=e.map((function(a,s){var u=c[r][s];if(u>0){var f=(0,i.flatKey)(e.slice(0,s+1)),h=1+(s===l.length-1?S:0),g=t.subtotals&&d.enabled&&s!==l.length-1,y=g?n.toggleRowKey(f):null;return o.default.createElement("th",{key:"rowKeyLabel-"+s,className:"pvtRowLabel",rowSpan:u,colSpan:h,onClick:n.clickHeaderHandler(p,e,n.props.rows,s,n.props.tableOptions.clickRowHeaderCallback)},v(g,(n.state.collapsedRows[f]?b:m)+" ",y,a))}return null})),T=e.length<l.length?o.default.createElement("th",{className:"pvtRowLabel",key:"rowKeyBuffer",colSpan:l.length-e.length+S,rowSpan:1,onClick:this.clickHeaderHandler(p,e,this.props.rows,e.length,this.props.tableOptions.clickRowHeaderCallback,!0)},"Totals"):null,A=w[O]||{},_=f.map((function(t){var r=(0,i.flatKey)(t),a=p.getAggregator(e,t),n=a.value(),l=g(e,t,n);return o.default.createElement("td",{className:"pvtVal",key:"pvtVal-"+r,onClick:A[r],style:l},a.format(n))})),N=null;if(h){var j=p.getAggregator(e,[]),K=j.value(),x=y(K);N=o.default.createElement("td",{key:"total",className:"pvtTotal",onClick:k[O],style:x},j.format(K))}var P=[].concat(u(C),[T],u(_),[N]);return o.default.createElement("tr",{key:"keyRow-"+O},P)}},{key:"renderTotalsRow",value:function(t){var e=t.rowAttrs,r=t.colAttrs,a=t.visibleColKeys,n=t.colTotalColors,l=t.rowTotals,s=t.pivotData,c=t.colTotalCallbacks,f=t.grandTotalCallback,p=o.default.createElement("th",{key:"label",className:"pvtTotalLabel",colSpan:e.length+Math.min(r.length,1),onClick:this.clickHeaderHandler(s,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},"Totals"),h=a.map((function(t){var e=(0,i.flatKey)(t),r=s.getAggregator([],t),a=r.value(),l=n([],t,a);return o.default.createElement("td",{className:"pvtTotal",key:"total-"+e,onClick:c[e],style:l},r.format(a))})),d=null;if(l){var v=s.getAggregator([],[]),g=v.value();d=o.default.createElement("td",{key:"total",className:"pvtGrandTotal",onClick:f},v.format(g))}var y=[p].concat(u(h),[d]);return o.default.createElement("tr",{key:"total"},y)}},{key:"visibleKeys",value:function(t,e,r,a){return t.filter((function(t){return!t.some((function(r,a){return e[(0,i.flatKey)(t.slice(0,a))]}))&&(t.length===r||(0,i.flatKey)(t)in e||!a.hideOnExpand)}))}},{key:"render",value:function(){var e=this;this.cachedProps!==this.props&&(this.cachedProps=this.props,this.cachedBasePivotSettings=this.getBasePivotSettings());var r=this.cachedBasePivotSettings,a=r.colAttrs,n=r.rowAttrs,l=r.rowKeys,i=r.colKeys,s=r.colTotals,c=r.rowSubtotalDisplay,f=r.colSubtotalDisplay,p=t.subtotals?this.visibleKeys(l,this.state.collapsedRows,n.length,c):l,h=t.subtotals?this.visibleKeys(i,this.state.collapsedCols,a.length,f):i,d=Object.assign({visibleRowKeys:p,maxRowVisible:Math.max.apply(Math,u(p.map((function(t){return t.length})))),visibleColKeys:h,maxColVisible:Math.max.apply(Math,u(h.map((function(t){return t.length})))),rowAttrSpans:this.calcAttrSpans(p,n.length),colAttrSpans:this.calcAttrSpans(h,a.length)},this.cachedBasePivotSettings);return o.default.createElement("table",{className:"pvtTable"},o.default.createElement("thead",null,a.map((function(t,r){return e.renderColHeaderRow(t,r,d)})),0!==n.length&&this.renderRowHeaderRow(d)),o.default.createElement("tbody",null,p.map((function(t,r){return e.renderTableRow(t,r,d)})),s&&this.renderTotalsRow(d)))}}],[{key:"heatmapMappers",value:function(e,r,n,o){var l=function(){},s=function(){},u=function(){};if(t.heatmapMode){if(n){var c=Object.values(e.colTotals).map((function(t){return t.value()}));u=r(c)}if(o){var f=Object.values(e.rowTotals).map((function(t){return t.value()}));s=r(f)}if("full"===t.heatmapMode){var p=[];Object.values(e.tree).map((function(t){return Object.values(t).map((function(t){return p.push(t.value())}))}));var h=r(p);l=function(t,e,r){return h(r)}}else if("row"===t.heatmapMode){var d={};Object.entries(e.tree).map((function(t){var e=a(t,2),n=e[0],o=e[1],l=Object.values(o).map((function(t){return t.value()}));d[n]=r(l)})),l=function(t,e,r){return d[(0,i.flatKey)(t)](r)}}else if("col"===t.heatmapMode){var v={},g={};for(var y in Object.values(e.tree).map((function(t){return Object.entries(t).map((function(t){var e=a(t,2),r=e[0],n=e[1];r in g||(g[r]=[]),g[r].push(n.value())}))})),g)v[y]=r(g[y]);l=function(t,e,r){return v[(0,i.flatKey)(e)](r)}}}return{valueCellColors:l,rowTotalColors:s,colTotalColors:u}}}]),r}(o.default.Component);return e.defaultProps=i.PivotData.defaultProps,e.propTypes=i.PivotData.propTypes,e.defaultProps.tableColorScaleGenerator=d,e.defaultProps.tableOptions={},e.propTypes.tableColorScaleGenerator=l.default.func,e.propTypes.tableOptions=l.default.object,e}var y=function(t){function e(){return f(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return h(e,t),n(e,[{key:"render",value:function(){var t=new i.PivotData(this.props),e=t.getRowKeys(),r=t.getColKeys();0===e.length&&e.push([]),0===r.length&&r.push([]);var a=t.props.rows.map((function(t){return t}));1===r.length&&0===r[0].length?a.push(this.props.aggregatorName):r.map((function(t){return a.push(t.join("-"))}));var n=e.map((function(e){var a=e.map((function(t){return t}));return r.map((function(r){var n=t.getAggregator(e,r).value();a.push(n||"")})),a}));return n.unshift(a),o.default.createElement("textarea",{value:n.map((function(t){return t.join("\t")})).join("\n"),style:{width:window.innerWidth/2,height:window.innerHeight/2},readOnly:!0})}}]),e}(o.default.PureComponent);y.defaultProps=i.PivotData.defaultProps,y.propTypes=i.PivotData.propTypes,e.default={Table:g(),"Table Heatmap":g({heatmapMode:"full"}),"Table Col Heatmap":g({heatmapMode:"col"}),"Table Row Heatmap":g({heatmapMode:"row"}),"Table With Subtotal":g({subtotals:!0}),"Table With Subtotal Heatmap":g({heatmapMode:"full",subtotals:!0}),"Table With Subtotal Col Heatmap":g({heatmapMode:"col",subtotals:!0}),"Table With Subtotal Row Heatmap":g({heatmapMode:"row",subtotals:!0}),"Exportable TSV":y},t.exports=e.default},4819:function(t,e,r){},4896:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return h}));r(0);var a=r(47),n=r(243),o=r(4817),l=r.n(o),i=r(4619),s=(r(4819),r(9));const u=a.j.div`
  padding: ${({theme:t})=>4*t.gridUnit}px;
  height: ${({height:t})=>t}px;
  width: ${({width:t})=>t}px;
  overflow-y: scroll;
  }
`,c=(t,e,r,a)=>{},f=(t,e,r,a,n,o)=>{},p=(t,e,r,a,n,o)=>{};function h(t){const{data:e,height:r,width:a,groupbyRows:o,groupbyColumns:h,metrics:d,tableRenderer:v,colOrder:g,rowOrder:y,aggregateFunction:m,transposePivot:b,rowSubtotalPosition:w,colSubtotalPosition:k,colTotals:O,rowTotals:S,valueFormat:C}=t,T=Object(n.c)(C),A={Count:(_=i.aggregatorTemplates).count(T),"Count Unique Values":_.countUnique(T),"List Unique Values":_.listUnique(", "),Sum:_.sum(T),Average:_.average(T),Median:_.median(T),"Sample Variance":_.var(1,T),"Sample Standard Deviation":_.stdev(1,T),Minimum:_.min(T),Maximum:_.max(T),First:_.first(T),Last:_.last(T),"Sum as Fraction of Total":_.fractionOf(_.sum(),"total",T),"Sum as Fraction of Rows":_.fractionOf(_.sum(),"row",T),"Sum as Fraction of Columns":_.fractionOf(_.sum(),"col",T),"Count as Fraction of Total":_.fractionOf(_.count(),"total",T),"Count as Fraction of Rows":_.fractionOf(_.count(),"row",T),"Count as Fraction of Columns":_.fractionOf(_.count(),"col",T)};var _;const N=d.map(t=>"string"==typeof t?t:t.label),j=e.reduce((t,e)=>[...t,...N.map(t=>({...e,metric:t,value:e[t]}))],[]),[K,x]=b?[h,["metric",...o]]:[o,["metric",...h]];return Object(s.b)(u,{height:r,width:a},Object(s.b)(l.a,{data:j,rows:K,cols:x,aggregators:A,aggregatorName:m,vals:["value"],rendererName:v,colOrder:g,rowOrder:y,sorters:{metric:Object(i.sortAs)(N)},tableOptions:{clickCallback:c,clickRowHeaderCallback:p,clickColumnHeaderCallback:f,colTotals:O,rowTotals:S},subtotalOptions:{colSubtotalDisplay:{displayOnTop:k},rowSubtotalDisplay:{displayOnTop:w}}}))}}}]);